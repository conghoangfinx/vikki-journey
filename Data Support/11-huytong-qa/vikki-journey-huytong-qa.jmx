<?xml version="1.0" encoding="UTF-8"?>
<jmeterTestPlan version="1.2" properties="5.0" jmeter="5.6.3">
  <hashTree>
    <TestPlan guiclass="TestPlanGui" testclass="TestPlan" testname="Vikki Journey">
      <boolProp name="TestPlan.functional_mode">true</boolProp>
      <boolProp name="TestPlan.serialize_threadgroups">true</boolProp>
      <elementProp name="TestPlan.user_defined_variables" elementType="Arguments" guiclass="ArgumentsPanel" testclass="Arguments" testname="User Defined Variables">
        <collectionProp name="Arguments.arguments"/>
      </elementProp>
      <stringProp name="TestPlan.user_define_classpath">./lib</stringProp>
    </TestPlan>
    <hashTree>
      <Arguments guiclass="ArgumentsPanel" testclass="Arguments" testname="Defined Variables - UAT">
        <collectionProp name="Arguments.arguments">
          <elementProp name="scheme" elementType="Argument">
            <stringProp name="Argument.name">scheme</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
            <stringProp name="Argument.value">https</stringProp>
          </elementProp>
          <elementProp name="host" elementType="Argument">
            <stringProp name="Argument.name">host</stringProp>
            <stringProp name="Argument.value">ingress-int.uat.galaxyfinx.in</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
            <stringProp name="Argument.desc">UAT</stringProp>
          </elementProp>
          <elementProp name="internalKey" elementType="Argument">
            <stringProp name="Argument.name">internalKey</stringProp>
            <stringProp name="Argument.value">UvzUJdDucBtgFvNxu9F7XzpyA</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="adminKey" elementType="Argument">
            <stringProp name="Argument.name">adminKey</stringProp>
            <stringProp name="Argument.value">yZn7UbifwbvhuNihUsvYOgurk</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="publicKey" elementType="Argument">
            <stringProp name="Argument.name">publicKey</stringProp>
            <stringProp name="Argument.value">GfS39omUfRHReT3G02sSYTIpF</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="hpvOcrMockingId" elementType="Argument">
            <stringProp name="Argument.name">hpvOcrMockingId</stringProp>
            <stringProp name="Argument.value">d596264e-f918-4e4a-a7ee-1423481f18f8</stringProp>
            <stringProp name="Argument.desc">Wiremock ID</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="hdbBiometricMockingId" elementType="Argument">
            <stringProp name="Argument.name">hdbBiometricMockingId</stringProp>
            <stringProp name="Argument.value">bf3e65fb-4fc0-4cea-bccc-d4c906744ea3</stringProp>
            <stringProp name="Argument.desc">Wiremock ID</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="phoneNumberOnboard" elementType="Argument">
            <stringProp name="Argument.name">phoneNumberOnboard</stringProp>
            <stringProp name="Argument.value"></stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
            <stringProp name="Argument.desc">Prefix must 9900</stringProp>
          </elementProp>
          <elementProp name="idNumberOnboard" elementType="Argument">
            <stringProp name="Argument.name">idNumberOnboard</stringProp>
            <stringProp name="Argument.value"></stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
            <stringProp name="Argument.desc"></stringProp>
          </elementProp>
        </collectionProp>
      </Arguments>
      <hashTree/>
      <Arguments guiclass="ArgumentsPanel" testclass="Arguments" testname="Defined Variables - SIT" enabled="false">
        <collectionProp name="Arguments.arguments">
          <elementProp name="scheme" elementType="Argument">
            <stringProp name="Argument.name">scheme</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
            <stringProp name="Argument.value">https</stringProp>
          </elementProp>
          <elementProp name="host" elementType="Argument">
            <stringProp name="Argument.name">host</stringProp>
            <stringProp name="Argument.value">ingress-int.sit.galaxyfinx.in</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
            <stringProp name="Argument.desc">UAT</stringProp>
          </elementProp>
          <elementProp name="internalKey" elementType="Argument">
            <stringProp name="Argument.name">internalKey</stringProp>
            <stringProp name="Argument.value">hF35bcI4A2g6JUb4lrs0cvM5t</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="adminKey" elementType="Argument">
            <stringProp name="Argument.name">adminKey</stringProp>
            <stringProp name="Argument.value">5jrEGY49i8OV8tmEOC5euLQW6</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="publicKey" elementType="Argument">
            <stringProp name="Argument.name">publicKey</stringProp>
            <stringProp name="Argument.value">uX6YVolBtq4lEOsFBYitJrR8B</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="hpvOcrMockingId" elementType="Argument">
            <stringProp name="Argument.name">hpvOcrMockingId</stringProp>
            <stringProp name="Argument.value">d596264e-f918-4e4a-a7ee-1423481f18f8</stringProp>
            <stringProp name="Argument.desc">Wiremock ID</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="hdbBiometricMockingId" elementType="Argument">
            <stringProp name="Argument.name">hdbBiometricMockingId</stringProp>
            <stringProp name="Argument.value">bf3e65fb-4fc0-4cea-bccc-d4c906744ea3</stringProp>
            <stringProp name="Argument.desc">Wiremock ID</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="phoneNumberOnboard" elementType="Argument">
            <stringProp name="Argument.name">phoneNumberOnboard</stringProp>
            <stringProp name="Argument.value"></stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
            <stringProp name="Argument.desc">Prefix must 9900</stringProp>
          </elementProp>
          <elementProp name="idNumberOnboard" elementType="Argument">
            <stringProp name="Argument.name">idNumberOnboard</stringProp>
            <stringProp name="Argument.value"></stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
            <stringProp name="Argument.desc"></stringProp>
          </elementProp>
        </collectionProp>
      </Arguments>
      <hashTree/>
      <ConfigTestElement guiclass="HttpDefaultsGui" testclass="ConfigTestElement" testname="HTTP Request Defaults" enabled="true">
        <intProp name="HTTPSampler.connect_timeout">50000</intProp>
        <intProp name="HTTPSampler.response_timeout">50000</intProp>
        <stringProp name="HTTPSampler.domain">${host}</stringProp>
        <stringProp name="HTTPSampler.port">443</stringProp>
        <stringProp name="HTTPSampler.protocol">${scheme}</stringProp>
        <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel" testclass="Arguments" testname="User Defined Variables">
          <collectionProp name="Arguments.arguments"/>
        </elementProp>
        <stringProp name="HTTPSampler.implementation"></stringProp>
      </ConfigTestElement>
      <hashTree/>
      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="Onboarding" enabled="true">
        <stringProp name="ThreadGroup.num_threads">${__P(threads,1)}</stringProp>
        <stringProp name="ThreadGroup.ramp_time">${__P(rampups, 30)}</stringProp>
        <stringProp name="ThreadGroup.duration">${__P(durations,600)}</stringProp>
        <longProp name="ThreadGroup.delay">5</longProp>
        <boolProp name="ThreadGroup.same_user_on_next_iteration">false</boolProp>
        <stringProp name="ThreadGroup.on_sample_error">stoptestnow</stringProp>
        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="Loop Controller">
          <stringProp name="LoopController.loops">1</stringProp>
          <boolProp name="LoopController.continue_forever">false</boolProp>
        </elementProp>
      </ThreadGroup>
      <hashTree>
        <JSR223PreProcessor guiclass="TestBeanGUI" testclass="JSR223PreProcessor" testname="GENERATE PHONE AND ID NUMBER - Single" enabled="true">
          <stringProp name="scriptLanguage">groovy</stringProp>
          <stringProp name="parameters"></stringProp>
          <stringProp name="filename"></stringProp>
          <stringProp name="cacheKey">true</stringProp>
          <stringProp name="script">import java.text.SimpleDateFormat
import java.util.Random

//log.info(&quot;\n---------- GENERATE PHONE AND ID NUMBER ----------&quot;)

// ‚úÖ L·∫•y bi·∫øn __threadNum, ƒë·∫£m b·∫£o gi√° tr·ªã kh√¥ng null v√† ki·ªÉu s·ªë nguy√™n
def threadNum = ${__threadNum}  // Tr√°nh null, ƒë·∫£m b·∫£o s·ªë nguy√™n

// ‚úÖ L·∫•y th·ªùi gian hi·ªán t·∫°i v·ªõi c√°c ƒë·ªãnh d·∫°ng mong mu·ªën
def currentDate = new Date()
def dateFormatSSddMMHHmm = new SimpleDateFormat(&quot;ssddMMHHmm&quot;)  // ƒê·ªãnh d·∫°ng gi√¢y - ng√†y - th√°ng - gi·ªù - ph√∫t
def dateFormatHHmm = new SimpleDateFormat(&quot;HHmm&quot;)  // ƒê·ªãnh d·∫°ng HHmm (gi·ªù, ph√∫t)
def dateFormatss = new SimpleDateFormat(&quot;ss&quot;)  // ƒê·ªãnh d·∫°ng ssHHmm (gi√¢y)
def formattedDate = dateFormatSSddMMHHmm.format(currentDate)  // Ng√†y th√°ng nƒÉm gi·ªù ph√∫t
def formattedTimeHHmm = dateFormatHHmm.format(currentDate)  // Gi·ªù ph√∫t hi·ªán t·∫°i
def formattedTimess = dateFormatss.format(currentDate)  // Gi·ªù ph√∫t hi·ªán t·∫°i

// ‚úÖ Sinh ra 2 s·ªë ng·∫´u nhi√™n cho idNumberOnboard
Random rand = new Random()
def randomPart = String.format(&quot;%02d&quot;, rand.nextInt(100))  // 2 s·ªë ng·∫´u nhi√™n t·ª´ 00 - 99

// ‚úÖ Ki·ªÉm tra v√† t·∫°o s·ªë ƒëi·ªán tho·∫°i n·∫øu ch∆∞a c√≥ gi√° tr·ªã
//def phoneNumberOnboard = vars.get(&quot;phoneNumberOnboard&quot;) ?: &quot;990&quot; + randomPart + formattedTimeHHmm
//def phoneNumberOnboard = vars.get(&quot;phoneNumberOnboard&quot;) ?: &quot;990&quot; + String.format(&quot;%02d&quot;, threadNum) + formattedTimeHHmm
def phoneNumberOnboard = vars.get(&quot;phoneNumberOnboard&quot;) ?: &quot;990&quot; + formattedTimess + formattedTimeHHmm

// ‚úÖ Ki·ªÉm tra v√† t·∫°o s·ªë cƒÉn c∆∞·ªõc n·∫øu ch∆∞a c√≥ gi√° tr·ªã
def idNumberOnboard = vars.get(&quot;idNumberOnboard&quot;) ?: String.format(&quot;%02d&quot;, threadNum) + formattedDate
//def idNumberOnboard = vars.get(&quot;idNumberOnboard&quot;) ?: randomPart + formattedDate

// ‚úÖ G√°n l·∫°i gi√° tr·ªã v√†o bi·∫øn JMeter
vars.put(&quot;phoneNumberOnboard&quot;, phoneNumberOnboard)
vars.put(&quot;idNumberOnboard&quot;, idNumberOnboard)

</stringProp>
        </JSR223PreProcessor>
        <hashTree/>
        <JSR223PreProcessor guiclass="TestBeanGUI" testclass="JSR223PreProcessor" testname="GENERATE PHONE AND ID NUMBER - Multiple" enabled="false">
          <stringProp name="scriptLanguage">groovy</stringProp>
          <stringProp name="parameters"></stringProp>
          <stringProp name="filename"></stringProp>
          <stringProp name="cacheKey">true</stringProp>
          <stringProp name="script">import java.text.SimpleDateFormat
import java.util.Random

//log.info(&quot;\n---------- GENERATE PHONE AND ID NUMBER ----------&quot;)

// ‚úÖ L·∫•y bi·∫øn __threadNum, ƒë·∫£m b·∫£o gi√° tr·ªã kh√¥ng null v√† ki·ªÉu s·ªë nguy√™n
def threadNum = ${__threadNum}  // Tr√°nh null, ƒë·∫£m b·∫£o s·ªë nguy√™n

// ‚úÖ L·∫•y th·ªùi gian hi·ªán t·∫°i v·ªõi c√°c ƒë·ªãnh d·∫°ng mong mu·ªën
def currentDate = new Date()
def dateFormatSSddMMHHmm = new SimpleDateFormat(&quot;ssddMMHHmm&quot;)  // ƒê·ªãnh d·∫°ng gi√¢y - ng√†y - th√°ng - gi·ªù - ph√∫t
def dateFormatHHmm = new SimpleDateFormat(&quot;HHmm&quot;)  // ƒê·ªãnh d·∫°ng HHmm (gi·ªù, ph√∫t)
def dateFormatss = new SimpleDateFormat(&quot;ss&quot;)  // ƒê·ªãnh d·∫°ng ssHHmm (gi√¢y)
def formattedDate = dateFormatSSddMMHHmm.format(currentDate)  // Ng√†y th√°ng nƒÉm gi·ªù ph√∫t
def formattedTimeHHmm = dateFormatHHmm.format(currentDate)  // Gi·ªù ph√∫t hi·ªán t·∫°i
def formattedTimess = dateFormatss.format(currentDate)  // Gi·ªù ph√∫t hi·ªán t·∫°i

// ‚úÖ Sinh ra 2 s·ªë ng·∫´u nhi√™n cho idNumberOnboard
Random rand = new Random()
def randomPart = String.format(&quot;%02d&quot;, rand.nextInt(100))  // 2 s·ªë ng·∫´u nhi√™n t·ª´ 00 - 99

// ‚úÖ Ki·ªÉm tra v√† t·∫°o s·ªë ƒëi·ªán tho·∫°i n·∫øu ch∆∞a c√≥ gi√° tr·ªã
//def phoneNumberOnboard = vars.get(&quot;phoneNumberOnboard&quot;) ?: &quot;990&quot; + randomPart + formattedTimeHHmm
//def phoneNumberOnboard = vars.get(&quot;phoneNumberOnboard&quot;) ?: &quot;990&quot; + String.format(&quot;%02d&quot;, threadNum) + formattedTimeHHmm
def phoneNumberOnboard = vars.get(&quot;phoneNumberOnboard&quot;) ?: &quot;990&quot; + formattedTimess + formattedTimeHHmm

// ‚úÖ Ki·ªÉm tra v√† t·∫°o s·ªë cƒÉn c∆∞·ªõc n·∫øu ch∆∞a c√≥ gi√° tr·ªã
def idNumberOnboard = vars.get(&quot;idNumberOnboard&quot;) ?: String.format(&quot;%02d&quot;, threadNum) + formattedDate
//def idNumberOnboard = vars.get(&quot;idNumberOnboard&quot;) ?: randomPart + formattedDate

// ‚úÖ G√°n l·∫°i gi√° tr·ªã v√†o bi·∫øn JMeter
vars.put(&quot;phoneNumberOnboard&quot;, phoneNumberOnboard)
vars.put(&quot;idNumberOnboard&quot;, idNumberOnboard)

</stringProp>
        </JSR223PreProcessor>
        <hashTree/>
        <IfController guiclass="IfControllerPanel" testclass="IfController" testname="0. Clear Card" enabled="true">
          <stringProp name="IfController.condition">true</stringProp>
          <boolProp name="IfController.evaluateAll">false</boolProp>
          <boolProp name="IfController.useExpression">true</boolProp>
        </IfController>
        <hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="T√¨m Lead v√† X√≥a" enabled="true">
            <stringProp name="HTTPSampler.domain">113.161.76.226</stringProp>
            <stringProp name="HTTPSampler.port">8087</stringProp>
            <stringProp name="HTTPSampler.protocol">http</stringProp>
            <stringProp name="HTTPSampler.path">/hdb-lead-card-management/api/lead/find_lead</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;inputData&quot;: [&#xd;
        &quot;${idNumberOnboard}&quot;&#xd;
    ],&#xd;
    &quot;searchLeadDetailMethod&quot;: &quot;NATIONAL_ID&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">x-api-key</stringProp>
                  <stringProp name="Header.value">szt995RHr033WwY616SWj831YAS346bK</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">log.info(&quot; \n ---------- SEARCH CARD LEAD AND DELETE ----------&quot;);

import groovy.json.JsonSlurper;
import org.apache.jmeter.samplers.SampleResult;
import org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy;
import org.apache.jmeter.protocol.http.control.HeaderManager;
import org.apache.jmeter.protocol.http.control.Header;
import org.apache.jmeter.threads.JMeterContext;

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);

// ‚úÖ L·∫•y response JSON t·ª´ request tr∆∞·ªõc ƒë√≥
def response = prev.getResponseDataAsString().trim();
def jsonSlurper = new JsonSlurper();
def jsonResponse;

// ‚úÖ Parse JSON an to√†n
try {
    jsonResponse = jsonSlurper.parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Ki·ªÉm tra n·∫øu c√≥ leads trong response
if (jsonResponse?.leads?.size() &gt; 0) {
    def leadIds = jsonResponse.leads.collect { it.leadId };
    vars.put(&quot;leadIds&quot;, leadIds.join(&quot;,&quot;)); // L∆∞u danh s√°ch leadId v√†o bi·∫øn JMeter
    
    log.info(&quot;üîπ Danh s√°ch leadIds ƒë√£ tr√≠ch xu·∫•t: &quot; + leadIds);

    // ‚úÖ G·ª≠i y√™u c·∫ßu x√≥a t·ª´ng leadId
    leadIds.each { leadId -&gt;
        log.info(&quot;üõë ƒêang g·ª≠i y√™u c·∫ßu x√≥a leadId: &quot; + leadId);
        
        // ‚úÖ T·∫°o HTTP Sampler ƒë·ªÉ g·ª≠i request ƒë·ªông
        def sampler = new HTTPSamplerProxy();
        sampler.setDomain(&quot;113.161.76.226&quot;);
        sampler.setPort(8087);
        sampler.setProtocol(&quot;http&quot;);
        sampler.setPath(&quot;/hdb-lead-card-management/api/lead/remove_lead&quot;);
        sampler.setMethod(&quot;PUT&quot;);
        
        // ‚úÖ Thi·∫øt l·∫≠p Header Manager
        def headerManager = new HeaderManager();
        headerManager.add(new Header(&quot;Content-Type&quot;, &quot;application/json&quot;));
        headerManager.add(new Header(&quot;x-api-key&quot;, &quot;szt995RHr033WwY616SWj831YAS346bK&quot;));
        sampler.setHeaderManager(headerManager);

        // ‚úÖ Thi·∫øt l·∫≠p Body
        def requestBody = &apos;{&quot;leads&quot;: [&quot;&apos; + leadId + &apos;&quot;]}&apos;;
        sampler.addNonEncodedArgument(&quot;&quot;, requestBody, &quot;&quot;);
        sampler.setPostBodyRaw(true);

        // ‚úÖ G·ª≠i request b·∫±ng SampleResult
        def sampleResult = sampler.sample();
        
        // ‚úÖ Ghi log k·∫øt qu·∫£
        log.info(&quot; Request: DELETE Lead ID: &quot; + leadId);
        log.info(&quot; Response Code: &quot; + sampleResult.getResponseCode());
        log.info(&quot; Response Message: &quot; + sampleResult.getResponseMessage());

        if (sampleResult.getResponseCode() != &quot;200&quot;) {
            log.warn(&quot;‚ùå L·ªói khi x√≥a leadId: &quot; + leadId + &quot; | Response: &quot; + sampleResult.getResponseDataAsString());
        } else {
            log.info(&quot;‚úÖ ƒê√£ x√≥a th√†nh c√¥ng leadId: &quot; + leadId);
        }
    }
} else {
    log.warn(&quot;‚úÖ Kh√¥ng c√≥ lead n√†o ƒë∆∞·ª£c t√¨m th·∫•y!&quot;);
}</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="T√¨m v√† ƒê√≥ng CIF WAY4" enabled="true">
            <stringProp name="HTTPSampler.domain">113.161.76.226</stringProp>
            <stringProp name="HTTPSampler.port">8087</stringProp>
            <stringProp name="HTTPSampler.protocol">http</stringProp>
            <stringProp name="HTTPSampler.path">/hdb-lead-card-management/api/client/get_client_by_identity_card_number?idCard=${idNumberOnboard}</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">GET</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">false</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel" testclass="Arguments" testname="User Defined Variables">
              <collectionProp name="Arguments.arguments"/>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">log.info(&quot; \n ---------- SEARCH CARD WAY4 AND DELETE ----------&quot;);

import groovy.json.JsonSlurper;
import org.apache.jmeter.samplers.SampleResult;
import org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy;
import org.apache.jmeter.protocol.http.control.HeaderManager;
import org.apache.jmeter.protocol.http.control.Header;
import org.apache.jmeter.threads.JMeterContext;


// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);

// ‚úÖ L·∫•y response JSON t·ª´ request tr∆∞·ªõc ƒë√≥
def response = prev.getResponseDataAsString().trim();
def jsonSlurper = new JsonSlurper();
def jsonResponse;

// ‚úÖ Parse JSON an to√†n
try {
    jsonResponse = jsonSlurper.parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Ki·ªÉm tra n·∫øu c√≥ d·ªØ li·ªáu `way4Clients` trong response
if (jsonResponse?.way4Clients?.size() &gt; 0) {
    def clientIds = jsonResponse.way4Clients.collect { it.id };
    vars.put(&quot;clientIds&quot;, clientIds.join(&quot;,&quot;)); // L∆∞u danh s√°ch clientId v√†o bi·∫øn JMeter
    
    log.info(&quot;üîπ Danh s√°ch clientIds ƒë√£ tr√≠ch xu·∫•t: &quot; + clientIds);

    // ‚úÖ G·ª≠i y√™u c·∫ßu DELETE t·ª´ng clientId
    clientIds.each { clientId -&gt;
        log.info(&quot;üõë ƒêang g·ª≠i y√™u c·∫ßu x√≥a clientId: &quot; + clientId);
        
        // ‚úÖ T·∫°o HTTP Sampler cho t·ª´ng request DELETE
        def sampler = new HTTPSamplerProxy();
        sampler.setDomain(&quot;113.161.76.226&quot;);
        sampler.setPort(8087);
        sampler.setProtocol(&quot;http&quot;);
        sampler.setPath(&quot;/hdb-lead-card-management/api/client/close_way4_cif?clientId=&quot; + clientId);
        sampler.setMethod(&quot;DELETE&quot;);

        // ‚úÖ Thi·∫øt l·∫≠p Header Manager
        def headerManager = new HeaderManager();
        headerManager.add(new Header(&quot;x-api-key&quot;, &quot;szt995RHr033WwY616SWj831YAS346bK&quot;));
        sampler.setHeaderManager(headerManager);

        // ‚úÖ G·ª≠i request b·∫±ng SampleResult
        def sampleResult = sampler.sample();
        
        // ‚úÖ Ghi log k·∫øt qu·∫£
        log.info(&quot; Request: DELETE clientId: &quot; + clientId);
        log.info(&quot; Response Code: &quot; + sampleResult.getResponseCode());
        log.info(&quot; Response Message: &quot; + sampleResult.getResponseMessage());

        if (sampleResult.getResponseCode() != &quot;200&quot;) {
            log.warn(&quot;‚ùå L·ªói khi x√≥a clientId: &quot; + clientId + &quot; | Response: &quot; + sampleResult.getResponseDataAsString());
        } else {
            log.info(&quot;‚úÖ ƒê√£ x√≥a th√†nh c√¥ng clientId: &quot; + clientId);
        }
    }
} else {
    log.warn(&quot;‚úÖ Kh√¥ng c√≥ client-ID n√†o trong way4Clients!&quot;);
}</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">x-api-key</stringProp>
                  <stringProp name="Header.value">szt995RHr033WwY616SWj831YAS346bK</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
          </hashTree>
        </hashTree>
        <IfController guiclass="IfControllerPanel" testclass="IfController" testname="1. Check and Clear Account" enabled="true">
          <stringProp name="IfController.condition">${__groovy(vars.get(&quot;phoneNumberOnboard&quot;) != null)}</stringProp>
          <boolProp name="IfController.evaluateAll">false</boolProp>
          <boolProp name="IfController.useExpression">true</boolProp>
        </IfController>
        <hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="1.1 NID - Get Prospect" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/v2/prospect/internal/lookup</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;type&quot;: &quot;national_id&quot;,&#xd;
    &quot;value&quot;: &quot;${idNumberOnboard}&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper

log.info(&quot;\n\n=============== !!! CHECK AND CLEAR ACCOUNT !!! ===============\n\n&quot;);
log.info(&quot;\n 1.1 ---------- NID - GET PROSPECT ----------&quot;)

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def response = prev.getResponseDataAsString().trim()
def responseCode = prev.getResponseCode().toString()
def responseMessage = prev.getResponseMessage()
def responseTime = prev.getTime()

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request
log.info(&quot;${prev.getURL()} | ${responseTime}ms&quot;)

// ‚úÖ Ki·ªÉm tra response code v√† log l·ªói n·∫øu kh√¥ng ph·∫£i 200
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API Error! Response Code: ${responseCode} | Message: ${responseMessage}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse
try {
    jsonResponse = new JsonSlurper().parseText(response)
} catch (Exception e) {
    log.error(&quot;‚ùå Error parsing JSON: ${e.message}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return
}

// ‚úÖ Tr√≠ch xu·∫•t v√† log th√¥ng tin c·∫ßn thi·∫øt
def phoneNumber = jsonResponse?.payload?.phoneNumber
def prospectId = jsonResponse?.payload?.idCardFront?.imageName?.split(&apos;_&apos;)?.first()

// Log Prospect ID n·∫øu t√¨m th·∫•y
if (prospectId) {
    vars.put(&quot;prospectIdOfNID&quot;, prospectId)
//    log.info(&quot;‚úÖ ProspectID of NID: ${prospectId}&quot;)
} else {
    log.warn(&quot;‚úÖ Prospect ID not found!&quot;)
}

// Log phoneNumber n·∫øu t√¨m th·∫•y
if (phoneNumber) {
    vars.put(&quot;phoneNumberOfNIDOld&quot;, phoneNumber.toString())
    log.info(&quot;‚úÖ Phone of NID: ${phoneNumber}&quot;)
} else {
    log.warn(&quot;‚úÖ Phone number not found in NID prospect&quot;)
}
</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <IfController guiclass="IfControllerPanel" testclass="IfController" testname="1.2 NID - Clear Prospect" enabled="true">
            <stringProp name="IfController.condition">${__groovy(
    def prospectIdOfNID = vars.get(&quot;prospectIdOfNID&quot;)
    if (prospectIdOfNID != null) {
        return true
    } else {
        return false
    }
)}</stringProp>
            <boolProp name="IfController.evaluateAll">false</boolProp>
            <boolProp name="IfController.useExpression">true</boolProp>
          </IfController>
          <hashTree>
            <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="1.2 Clear Prospect of NID" enabled="true">
              <stringProp name="HTTPSampler.path">/v2/onboarding/admin/prospect/${prospectIdOfNID}/clean-prospect</stringProp>
              <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
              <stringProp name="HTTPSampler.method">POST</stringProp>
              <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
              <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
              <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
                <collectionProp name="Arguments.arguments">
                  <elementProp name="" elementType="HTTPArgument">
                    <boolProp name="HTTPArgument.always_encode">false</boolProp>
                    <stringProp name="Argument.value">{&#xd;
  &quot;removeAllFaces&quot;: true&#xd;
}</stringProp>
                    <stringProp name="Argument.metadata">=</stringProp>
                  </elementProp>
                </collectionProp>
              </elementProp>
            </HTTPSamplerProxy>
            <hashTree>
              <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
                <collectionProp name="HeaderManager.headers">
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">Content-Type</stringProp>
                    <stringProp name="Header.value">application/json</stringProp>
                  </elementProp>
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">X-KEY</stringProp>
                    <stringProp name="Header.value">${adminKey}</stringProp>
                  </elementProp>
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">secret-key</stringProp>
                    <stringProp name="Header.value">izyMW6MEhhjN0KQfjyb11DwM9XuJyYU6</stringProp>
                  </elementProp>
                </collectionProp>
              </HeaderManager>
              <hashTree/>
              <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
                <stringProp name="scriptLanguage">groovy</stringProp>
                <stringProp name="parameters"></stringProp>
                <stringProp name="filename"></stringProp>
                <stringProp name="cacheKey">true</stringProp>
                <stringProp name="script">import groovy.json.JsonSlurper

log.info(&quot;\n 1.2 ---------- NID - CLEAR PROSPECT ----------&quot;)

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def response = prev.getResponseDataAsString().trim()
def responseCode = prev.getResponseCode().toString()
def responseMessage = prev.getResponseMessage()
def responseTime = prev.getTime()

// ‚úÖ Log th√¥ng tin c∆° b·∫£n
log.info(&quot;${prev.getURL()} | ${responseTime}ms&quot;)

// ‚úÖ Ki·ªÉm tra v√† log n·∫øu response code l√† 400 (Prospect not found)
if (responseCode == &quot;400&quot;) {
    def jsonResponse = new JsonSlurper().parseText(response)
    log.warn(&quot;‚ùå Prospect of NID not found!&quot;)
    return false // D·ª´ng n·∫øu kh√¥ng t√¨m th·∫•y prospect
}

// ‚úÖ Ki·ªÉm tra v√† log n·∫øu response code l√† 200 (Clear Success)
if (responseCode == &quot;200&quot;) {
    def jsonResponse = new JsonSlurper().parseText(response)
    if (jsonResponse.success == true) {
        log.info(&quot;‚úÖ Prospect of NID has been successfully cleared!&quot;)
    } else {
        log.warn(&quot;‚ùå Clear Prospect of NID failed! Response Message: ${jsonResponse.status.message}&quot;)
    }
    return true // Th√†nh c√¥ng
}

// ‚úÖ Ki·ªÉm tra v√† log c√°c l·ªói kh√°c (500, 502, etc.)
if (responseCode != &quot;200&quot; &amp;&amp; responseCode != &quot;400&quot;) {
    log.error(&quot;‚ùå Unexpected Error! Response Code: ${responseCode} | Message: ${responseMessage}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return false // D·ª´ng n·∫øu c√≥ l·ªói kh√°c
}

return true // ƒê·∫£m b·∫£o tr·∫£ v·ªÅ true n·∫øu kh√¥ng c√≥ l·ªói n√†o
</stringProp>
              </JSR223PostProcessor>
              <hashTree/>
            </hashTree>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="1.3 NID - Get CIF" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/api/party-service/v2/admin/parties/lookup</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;type&quot;: &quot;national_id&quot;,&#xd;
    &quot;value&quot;: &quot;${idNumberOnboard}&quot;,&#xd;
    &quot;queryParams&quot;: [&quot;cif&quot;]&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">dcb51815-7759-41d8-8fd6-46b32e241acf</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value"></stringProp>
                </elementProp>
                <elementProp name="baggage" elementType="Header">
                  <stringProp name="Header.name">baggage</stringProp>
                  <stringProp name="Header.value">sentry-environment=uat,sentry-transaction=StartupScreen,sentry-public_key=a8650128baf78c0abc77876f8736238f,sentry-trace_id=ae79a0eed0354e439ab2d6820a04d617,sentry-sample_rate=0.85</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="sentry-trace" elementType="Header">
                  <stringProp name="Header.name">sentry-trace</stringProp>
                  <stringProp name="Header.value">ae79a0eed0354e439ab2d6820a04d617-ae34fb51315f7476-1</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${adminKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper

log.info(&quot;\n 1.3 ---------- NID - GET CIF ----------&quot;)

// ‚úÖ L·∫•y th√¥ng tin t·ª´ response tr∆∞·ªõc ƒë√≥
def response = prev.getResponseDataAsString()?.trim() // Ki·ªÉm tra null tr√°nh l·ªói
def responseCode = prev.getResponseCode()?.toString()
def responseMessage = prev.getResponseMessage()
def responseTime = prev.getTime()

// ‚úÖ Log th√¥ng tin c∆° b·∫£n c·ªßa request
log.info(&quot;${prev.getURL()} | ${responseTime}ms&quot;)

// ‚úÖ Ki·ªÉm tra n·∫øu response code l√† 400 (Not Found)
if (responseCode == &quot;400&quot;) {
    prev.setResponseOK() // ƒê√°nh d·∫•u request th√†nh c√¥ng d√π kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu
    log.warn(&quot;‚úÖ Not Found ID Number Party.&quot;)
    return
}

// ‚úÖ Ki·ªÉm tra v√† log n·∫øu response code kh√°c 200 (l·ªói ngo√†i mong ƒë·ª£i)
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API Error! Response Code: ${responseCode} | Message: ${responseMessage}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse
try {
    jsonResponse = new JsonSlurper().parseText(response) // Parse response JSON
} catch (Exception e) {
    log.error(&quot;‚ùå JSON Parsing Error: ${e.message}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return
}

// ‚úÖ Tr√≠ch xu·∫•t th√¥ng tin t√†i kho·∫£n
def statusAccount = jsonResponse?.payload?.status ?: &quot;UNKNOWN&quot; // M·∫∑c ƒë·ªãnh &quot;UNKNOWN&quot;
def cifNumberOfNID = jsonResponse?.payload?.cif ?: &quot;N/A&quot; // M·∫∑c ƒë·ªãnh &quot;N/A&quot;

// ‚úÖ L∆∞u gi√° tr·ªã v√†o bi·∫øn JMeter
vars.put(&quot;cifNumberOfNID&quot;, cifNumberOfNID) 
vars.put(&quot;statusAccount&quot;, statusAccount)


// ‚úÖ Log th√¥ng tin t√†i kho·∫£n
log.info(&quot;‚úÖ CIF of NID: ${cifNumberOfNID} | Status: ${statusAccount}&quot;)</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <IfController guiclass="IfControllerPanel" testclass="IfController" testname="1.4 NID - Clear CIF" enabled="true">
            <stringProp name="IfController.condition">${__groovy(vars.get(&apos;statusAccount&apos;) == &apos;Active&apos;)}</stringProp>
            <boolProp name="IfController.evaluateAll">false</boolProp>
            <boolProp name="IfController.useExpression">true</boolProp>
          </IfController>
          <hashTree>
            <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="1.4 Clear CIF of NID" enabled="true">
              <stringProp name="HTTPSampler.path">/api/party-service/v2/admin/parties/deactivate-customer</stringProp>
              <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
              <stringProp name="HTTPSampler.method">PATCH</stringProp>
              <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
              <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
              <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
                <collectionProp name="Arguments.arguments">
                  <elementProp name="" elementType="HTTPArgument">
                    <boolProp name="HTTPArgument.always_encode">false</boolProp>
                    <stringProp name="Argument.value">{&#xd;
    &quot;customerCifNumber&quot;: &quot;${cifNumberOfNID}&quot;&#xd;
}</stringProp>
                    <stringProp name="Argument.metadata">=</stringProp>
                  </elementProp>
                </collectionProp>
              </elementProp>
            </HTTPSamplerProxy>
            <hashTree>
              <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
                <collectionProp name="HeaderManager.headers">
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name"></stringProp>
                    <stringProp name="Header.value"></stringProp>
                  </elementProp>
                  <elementProp name="Content-Type" elementType="Header">
                    <stringProp name="Header.name">Content-Type</stringProp>
                    <stringProp name="Header.value">application/json</stringProp>
                  </elementProp>
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">X-KEY</stringProp>
                    <stringProp name="Header.value">${adminKey}</stringProp>
                  </elementProp>
                </collectionProp>
              </HeaderManager>
              <hashTree/>
              <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
                <stringProp name="scriptLanguage">groovy</stringProp>
                <stringProp name="parameters"></stringProp>
                <stringProp name="filename"></stringProp>
                <stringProp name="cacheKey">true</stringProp>
                <stringProp name="script">import groovy.json.JsonSlurper

log.info(&quot;\n 1.4 ---------- NID - CLEAR CIF ----------&quot;)

// ‚úÖ L·∫•y th√¥ng tin t·ª´ response tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode()?.toString()
def responseMessage = prev.getResponseMessage()
def responseTime = prev.getTime()
def requestUrl = prev.getURL().toString()

// ‚úÖ Log th√¥ng tin c∆° b·∫£n c·ªßa request
log.info(&quot;${requestUrl} | ${responseTime}ms&quot;)

// ‚úÖ Ki·ªÉm tra n·∫øu response code l√† 400 (Not Found)
if (responseCode == &quot;400&quot;) {
    prev.setResponseOK() // ƒê√°nh d·∫•u request th√†nh c√¥ng d√π kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu
    log.warn(&quot;‚ùåÔ∏è Not Found ID Number Party.&quot;)
    return
}

// ‚úÖ Ki·ªÉm tra v√† log n·∫øu response code kh√°c 200 (l·ªói ngo√†i mong ƒë·ª£i)
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API Error! Response Code: ${responseCode} | Message: ${responseMessage}&quot;)
    return
}

// ‚úÖ N·∫øu API th√†nh c√¥ng, log x√°c nh·∫≠n ƒë√£ xo√° CIF th√†nh c√¥ng
log.info(&quot;‚úÖ Clear cifNumber of ID Number in Party Success!&quot;)
</stringProp>
              </JSR223PostProcessor>
              <hashTree/>
            </hashTree>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="1.5 Phone - Get Prospect" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/v2/prospect</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;phoneNumber&quot;: &quot;+84${phoneNumberOnboard}&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">dcb51815-7759-41d8-8fd6-46b32e241acf</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper

log.info(&quot;\n 1.5 ---------- PHONE - GET PROSPECT ----------&quot;)

// ‚úÖ L·∫•y th√¥ng tin t·ª´ response tr∆∞·ªõc ƒë√≥
def response = prev.getResponseDataAsString()?.trim()
def responseCode = prev.getResponseCode()?.toString()
def responseMessage = prev.getResponseMessage()
def responseTime = prev.getTime()

// ‚úÖ Log th√¥ng tin c∆° b·∫£n c·ªßa request
log.info(&quot;${prev.getURL()} | ${responseTime}ms&quot;)

// ‚úÖ Ki·ªÉm tra n·∫øu response code l√† 400 (Kh√¥ng t√¨m th·∫•y prospect)
if (responseCode == &quot;400&quot;) {
    prev.setResponseOK() // ƒê√°nh d·∫•u request th√†nh c√¥ng d√π kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu
    log.warn(&quot;‚úÖ Not Found Prospect from Phone Number.&quot;)
    return
}

// ‚úÖ Ki·ªÉm tra v√† log n·∫øu response code kh√°c 200 (l·ªói ngo√†i mong ƒë·ª£i)
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API Error! Response Code: ${responseCode} | Message: ${responseMessage}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse
try {
    jsonResponse = new JsonSlurper().parseText(response)
} catch (Exception e) {
    log.error(&quot;‚ùå JSON Parsing Error: ${e.message}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return
}

// ‚úÖ Tr√≠ch xu·∫•t prospectId t·ª´ payload
def prospectIdPhone = jsonResponse?.payload?.prospectId ?: null

if (prospectIdPhone) {
    vars.put(&quot;prospectIdOfPhone&quot;, prospectIdPhone.toString())
    log.info(&quot;‚úÖ ProspectID of Phone: ${prospectIdPhone}&quot;)
}</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <IfController guiclass="IfControllerPanel" testclass="IfController" testname="1.6 Phone - Clear Prospect" enabled="true">
            <stringProp name="IfController.condition">${__groovy(vars.get(&quot;prospectIdOfPhone&quot;) != null )}</stringProp>
            <boolProp name="IfController.evaluateAll">false</boolProp>
            <boolProp name="IfController.useExpression">true</boolProp>
          </IfController>
          <hashTree>
            <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname=" 1.6 Clear Prospect of Phone" enabled="true">
              <stringProp name="HTTPSampler.path">/v2/onboarding/admin/prospect/${prospectIdOfPhone}/clean-prospect</stringProp>
              <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
              <stringProp name="HTTPSampler.method">POST</stringProp>
              <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
              <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
              <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
                <collectionProp name="Arguments.arguments">
                  <elementProp name="" elementType="HTTPArgument">
                    <boolProp name="HTTPArgument.always_encode">false</boolProp>
                    <stringProp name="Argument.value">{&#xd;
  &quot;removeAllFaces&quot;: true&#xd;
}</stringProp>
                    <stringProp name="Argument.metadata">=</stringProp>
                  </elementProp>
                </collectionProp>
              </elementProp>
            </HTTPSamplerProxy>
            <hashTree>
              <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
                <collectionProp name="HeaderManager.headers">
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">Content-Type</stringProp>
                    <stringProp name="Header.value">application/json</stringProp>
                  </elementProp>
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">X-KEY</stringProp>
                    <stringProp name="Header.value">${adminKey}</stringProp>
                  </elementProp>
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">secret-key</stringProp>
                    <stringProp name="Header.value">izyMW6MEhhjN0KQfjyb11DwM9XuJyYU6</stringProp>
                  </elementProp>
                </collectionProp>
              </HeaderManager>
              <hashTree/>
              <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
                <stringProp name="scriptLanguage">groovy</stringProp>
                <stringProp name="parameters"></stringProp>
                <stringProp name="filename"></stringProp>
                <stringProp name="cacheKey">true</stringProp>
                <stringProp name="script">import groovy.json.JsonSlurper

log.info(&quot;\n 1.6 ---------- CLEAR PROSPECT OF PHONE ----------&quot;)

// ‚úÖ L·∫•y th√¥ng tin t·ª´ response tr∆∞·ªõc ƒë√≥
def response = prev.getResponseDataAsString()?.trim()
def responseCode = prev.getResponseCode()?.toString()
def responseMessage = prev.getResponseMessage()
def responseTime = prev.getTime()

// ‚úÖ Log th√¥ng tin c∆° b·∫£n c·ªßa request
log.info(&quot;${prev.getURL()} | ${responseTime}ms&quot;)

// ‚úÖ Ki·ªÉm tra n·∫øu response code l√† 400 (Kh√¥ng t√¨m th·∫•y prospect)
if (responseCode == &quot;400&quot;) {
    prev.setResponseOK() // ƒê√°nh d·∫•u request th√†nh c√¥ng d√π kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu
    log.warn(&quot;‚ö†Ô∏è Not Found Prospect from Phone Number (Response 400).&quot;)
    return
}

// ‚úÖ Ki·ªÉm tra v√† log n·∫øu response code kh√°c 200 (l·ªói ngo√†i mong ƒë·ª£i)
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API Error! Response Code: ${responseCode} | Message: ${responseMessage}&quot;)
    return
}

// ‚úÖ N·∫øu API th√†nh c√¥ng, log k·∫øt qu·∫£
log.info(&quot;‚úÖ Clear Prospect of Phone Success!&quot;)</stringProp>
              </JSR223PostProcessor>
              <hashTree/>
            </hashTree>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="1.7 Phone - Get CIF" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/api/party-service/v2/admin/parties/lookup</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;type&quot;: &quot;onboard_phone_number&quot;,&#xd;
    &quot;value&quot;: &quot;+84${phoneNumberOnboard}&quot;,&#xd;
    &quot;queryParams&quot;: [&quot;cif&quot;]&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">dcb51815-7759-41d8-8fd6-46b32e241acf</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value"></stringProp>
                </elementProp>
                <elementProp name="baggage" elementType="Header">
                  <stringProp name="Header.name">baggage</stringProp>
                  <stringProp name="Header.value">sentry-environment=uat,sentry-transaction=StartupScreen,sentry-public_key=a8650128baf78c0abc77876f8736238f,sentry-trace_id=ae79a0eed0354e439ab2d6820a04d617,sentry-sample_rate=0.85</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="sentry-trace" elementType="Header">
                  <stringProp name="Header.name">sentry-trace</stringProp>
                  <stringProp name="Header.value">ae79a0eed0354e439ab2d6820a04d617-ae34fb51315f7476-1</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${adminKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper

log.info(&quot;\n 1.7 ---------- PHONE - GET CIF ----------&quot;)

// ‚úÖ L·∫•y th√¥ng tin t·ª´ response tr∆∞·ªõc ƒë√≥
def response = prev.getResponseDataAsString()?.trim() // Ki·ªÉm tra null tr√°nh l·ªói
def responseCode = prev.getResponseCode()?.toString()
def responseMessage = prev.getResponseMessage()
def responseTime = prev.getTime()

// ‚úÖ Log th√¥ng tin c∆° b·∫£n c·ªßa request
log.info(&quot;${prev.getURL()} | ${responseTime}ms&quot;)

// ‚úÖ Ki·ªÉm tra n·∫øu response code l√† 400 (Kh√¥ng t√¨m th·∫•y Phone Number Party)
if (responseCode == &quot;400&quot;) {
    prev.setResponseOK() // ƒê√°nh d·∫•u request th√†nh c√¥ng d√π kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu
    log.warn(&quot;‚úÖ Not Found Phone Number Party.&quot;)
    return
}

// ‚úÖ Ki·ªÉm tra v√† log n·∫øu response code kh√°c 200 (l·ªói ngo√†i mong ƒë·ª£i)
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API Error! Response Code: ${responseCode} | Message: ${responseMessage}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse
try {
    jsonResponse = new JsonSlurper().parseText(response) // Parse response JSON
} catch (Exception e) {
    log.error(&quot;‚ùå JSON Parsing Error: ${e.message}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return
}

// ‚úÖ Tr√≠ch xu·∫•t th√¥ng tin t√†i kho·∫£n
def statusAccount = jsonResponse?.payload?.status ?: &quot;UNKNOWN&quot; // M·∫∑c ƒë·ªãnh &quot;UNKNOWN&quot;
def cifNumberOld = jsonResponse?.payload?.cif ?: &quot;N/A&quot; // M·∫∑c ƒë·ªãnh &quot;N/A&quot;

// ‚úÖ L∆∞u gi√° tr·ªã v√†o bi·∫øn JMeter
vars.put(&quot;statusAccount&quot;, statusAccount)
vars.put(&quot;cifNumberOld&quot;, cifNumberOld)

// ‚úÖ Log th√¥ng tin t√†i kho·∫£n
log.info(&quot;‚úÖ CIF Account Old: ${cifNumberOld} | Status: ${statusAccount}&quot;)
</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <IfController guiclass="IfControllerPanel" testclass="IfController" testname="1.8 Phone - Clear CIF" enabled="true">
            <stringProp name="IfController.condition">${__groovy(vars.get(&apos;statusAccount&apos;) == &apos;Active&apos;)}</stringProp>
            <boolProp name="IfController.evaluateAll">false</boolProp>
            <boolProp name="IfController.useExpression">true</boolProp>
          </IfController>
          <hashTree>
            <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="1.8 Clear CIF of Phone" enabled="true">
              <stringProp name="HTTPSampler.path">/api/party-service/v2/admin/parties/deactivate-customer</stringProp>
              <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
              <stringProp name="HTTPSampler.method">PATCH</stringProp>
              <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
              <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
              <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
                <collectionProp name="Arguments.arguments">
                  <elementProp name="" elementType="HTTPArgument">
                    <boolProp name="HTTPArgument.always_encode">false</boolProp>
                    <stringProp name="Argument.value">{&#xd;
    &quot;customerCifNumber&quot;: &quot;${cifNumberOld}&quot;&#xd;
}</stringProp>
                    <stringProp name="Argument.metadata">=</stringProp>
                  </elementProp>
                </collectionProp>
              </elementProp>
            </HTTPSamplerProxy>
            <hashTree>
              <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
                <collectionProp name="HeaderManager.headers">
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name"></stringProp>
                    <stringProp name="Header.value"></stringProp>
                  </elementProp>
                  <elementProp name="Content-Type" elementType="Header">
                    <stringProp name="Header.name">Content-Type</stringProp>
                    <stringProp name="Header.value">application/json</stringProp>
                  </elementProp>
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">X-KEY</stringProp>
                    <stringProp name="Header.value">${adminKey}</stringProp>
                  </elementProp>
                </collectionProp>
              </HeaderManager>
              <hashTree/>
              <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
                <stringProp name="scriptLanguage">groovy</stringProp>
                <stringProp name="parameters"></stringProp>
                <stringProp name="filename"></stringProp>
                <stringProp name="cacheKey">true</stringProp>
                <stringProp name="script">import groovy.json.JsonSlurper

log.info(&quot;\n 1.8 ---------- PHONE - CLEAR CIF ----------&quot;)

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def response = prev.getResponseDataAsString()?.trim() // Ki·ªÉm tra null tr√°nh l·ªói
def responseCode = prev.getResponseCode()?.toString()
def responseMessage = prev.getResponseMessage()
def responseTime = prev.getTime()

// ‚úÖ Log th√¥ng tin c∆° b·∫£n c·ªßa request
log.info(&quot;${prev.getURL()} | ${responseTime}ms&quot;)

// ‚úÖ Ki·ªÉm tra n·∫øu response code l√† 400 (Kh√¥ng t√¨m th·∫•y Phone Number Party)
if (responseCode == &quot;400&quot;) {
    prev.setResponseOK()  // ƒê√°nh d·∫•u request th√†nh c√¥ng d√π kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu
    log.warn(&quot;‚ö†Ô∏è Not Found Phone Number Party (Response 400).&quot;)
    return  // D·ª´ng l·∫°i n·∫øu kh√¥ng t√¨m th·∫•y Phone Number Party
}

// ‚úÖ Ki·ªÉm tra v√† log n·∫øu response code kh√°c 200 (l·ªói ngo√†i mong ƒë·ª£i)
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API Error! Response Code: ${responseCode} | Message: ${responseMessage}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return  // D·ª´ng n·∫øu c√≥ l·ªói ngo√†i mong ƒë·ª£i
}

// ‚úÖ N·∫øu API th√†nh c√¥ng, log k·∫øt qu·∫£ m√† kh√¥ng c·∫ßn hi·ªÉn th·ªã response ƒë·∫ßy ƒë·ªß
log.info(&quot;‚úÖ Clear CIF Number of Phone in Party Success!&quot;)
</stringProp>
              </JSR223PostProcessor>
              <hashTree/>
            </hashTree>
          </hashTree>
        </hashTree>
        <IfController guiclass="IfControllerPanel" testclass="IfController" testname="2. Create new Account" enabled="true">
          <stringProp name="IfController.condition">${__groovy(vars.get(&quot;phoneNumberOnboard&quot;) != null)}</stringProp>
          <boolProp name="IfController.evaluateAll">false</boolProp>
          <boolProp name="IfController.useExpression">true</boolProp>
        </IfController>
        <hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.1 Register Phone" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/v3/onboarding/mobile/verify</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{ &#xd;
	&quot;deviceId&quot;: &quot;${deviceId}&quot;,&#xd;
    &quot;languageCode&quot;: &quot;vi&quot;,&#xd;
    &quot;mobileNumber&quot;: {&#xd;
        &quot;number&quot;: &quot;${phoneNumberOnboard}&quot;,&#xd;
        &quot;countryCode&quot;: &quot;+84&quot;&#xd;
     },&#xd;
     &quot;smsFooterString&quot;: &quot;123&quot;,&#xd;
    &quot;rateLimitingToken&quot;: &quot;kuhkh&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">dcb51815-7759-41d8-8fd6-46b32e241acf</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value"></stringProp>
                </elementProp>
                <elementProp name="baggage" elementType="Header">
                  <stringProp name="Header.name">baggage</stringProp>
                  <stringProp name="Header.value">sentry-environment=uat,sentry-transaction=StartupScreen,sentry-public_key=a8650128baf78c0abc77876f8736238f,sentry-trace_id=ae79a0eed0354e439ab2d6820a04d617,sentry-sample_rate=0.85</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="sentry-trace" elementType="Header">
                  <stringProp name="Header.name">sentry-trace</stringProp>
                  <stringProp name="Header.value">ae79a0eed0354e439ab2d6820a04d617-ae34fb51315f7476-1</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="Set Onboarding ID" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot;\n\n=============== !!! START ONBOARD NEW ACCOUNT !!! ===============\n\n&quot;);

log.info(&quot; \n 2.1 ---------- REGISTER PHONE ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);

// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Tr√≠ch xu·∫•t `onboardingId`
def onboardingId = jsonResponse?.payload?.onboardingId ?: null

// ‚úÖ Ki·ªÉm tra Onboarding ID
if (onboardingId) {
    vars.put(&quot;onboardingId&quot;, onboardingId);
    log.info(&quot;‚úÖ Onboard ID: &quot; + onboardingId);
} else {
    log.error(&quot;‚ùå Onboarding ID not found!&quot;);
}</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
            <JSR223PreProcessor guiclass="TestBeanGUI" testclass="JSR223PreProcessor" testname="JSR223 PreProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import java.util.UUID

// ‚úÖ T·∫°o deviceId ng·∫´u nhi√™n
def deviceId = UUID.randomUUID().toString()
vars.put(&quot;deviceId&quot;, deviceId)

log.info(&quot;\n---------- GENERATE DATA ----------&quot;)

// ‚úÖ L·∫•y gi√° tr·ªã t·ª´ bi·∫øn JMeter
def phoneNumberOnboard = vars.get(&quot;phoneNumberOnboard&quot;) ?: &quot;N/A&quot;  // ƒê·∫£m b·∫£o kh√¥ng null
def idNumberOnboard = vars.get(&quot;idNumberOnboard&quot;) ?: &quot;N/A&quot;  // ƒê·∫£m b·∫£o kh√¥ng null

// ‚úÖ Log th√¥ng tin s·ªë ƒëi·ªán tho·∫°i, s·ªë ID, v√† Device ID
log.info(&quot;‚úÖ Generated Phone Number: +84&quot; + phoneNumberOnboard)
log.info(&quot;‚úÖ Generated ID Number: &quot; + idNumberOnboard)
log.info(&quot;‚úÖ Generated Device ID: &quot; + deviceId)
</stringProp>
            </JSR223PreProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.2 Verify OTP" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">v3/onboarding/mobile/${onboardingId}/otp/verify</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value"> { &#xd;
    &quot;deviceId&quot;: &quot;${deviceId}&quot;,&#xd;
    &quot;otp&quot;: &quot;112233&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">b7460507-7c47-4931-8921-3497bc6e0e6c</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="Logging Verify OTP" enabled="true">
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.2 ---------- VERIFY OTP ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Tr√≠ch xu·∫•t `accessToken`
def accessToken = jsonResponse?.payload?.onboardingToken?.accessToken ?: null

// ‚úÖ Ki·ªÉm tra Access Token
if (accessToken) {
    vars.put(&quot;accessToken&quot;, accessToken);
    log.info(&quot;‚úÖ OTP x√°c minh th√†nh c√¥ng!&quot;);
//    log.info(&quot;Access Token: &quot; + accessToken);
} else {
    log.error(&quot;‚ùå Access Token not found!&quot;);
}</stringProp>
              <stringProp name="scriptLanguage">groovy</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.3 Set Resume Point" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/v4/onboarding/kyc/set-resume-point</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">PUT</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
	&quot;resumePoint&quot;: &quot;SELFIE&quot;,&#xd;
	&quot;appVersion&quot;: &quot;1.0.0&quot;,&#xd;
	&quot;data&quot;: &quot;&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">OBD-Authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${accessToken}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="Logging Resume point" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.3 ---------- SET RESUME POINT ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ N·∫øu th√†nh c√¥ng, log k·∫øt qu·∫£
log.info(&quot;‚úÖ Resume Point x·ª≠ l√Ω th√†nh c√¥ng!&quot;);</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.4 [MOCK] Hyperverge OCR - Create" enabled="false">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.domain">wiremock.sit.galaxyfinx.in</stringProp>
            <stringProp name="HTTPSampler.protocol">https</stringProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">__admin/mappings</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;name&quot;: &quot;jmeter-hyperverge-mocking-huytong-qa&quot;,&#xd;
    &quot;persistent&quot;: true,&#xd;
    &quot;request&quot;: {&#xd;
        &quot;url&quot;: &quot;/hyperverge/v1/link-kyc/results&quot;,&#xd;
        &quot;method&quot;: &quot;POST&quot;,&#xd;
        &quot;bodyPatterns&quot;: [&#xd;
            {&#xd;
                &quot;matchesJsonPath&quot;: &quot;$[?(@.transactionId == &apos;${onboardingId}&apos;)]&quot;&#xd;
            }&#xd;
        ]&#xd;
    },&#xd;
    &quot;response&quot;: {&#xd;
        &quot;status&quot;: 200,&#xd;
        &quot;jsonBody&quot;: {&#xd;
            &quot;status&quot;: &quot;success&quot;,&#xd;
            &quot;statusCode&quot;: 200,&#xd;
            &quot;metadata&quot;: {&#xd;
                &quot;requestId&quot;: &quot;bf65e9b1275f559916b0ec0678523991&quot;,&#xd;
                &quot;transactionId&quot;: &quot;1338449951351881728&quot;&#xd;
            },&#xd;
            &quot;result&quot;: {&#xd;
                &quot;workflowDetails&quot;: {&#xd;
                    &quot;workflowId&quot;: &quot;document_verification&quot;,&#xd;
                    &quot;version&quot;: 1&#xd;
                },&#xd;
                &quot;applicationStatus&quot;: &quot;auto_approved&quot;,&#xd;
                &quot;results&quot;: [&#xd;
                    {&#xd;
                        &quot;module&quot;: &quot;&quot;,&#xd;
                        &quot;countrySelected&quot;: &quot;vnm&quot;,&#xd;
                        &quot;documentSelected&quot;: &quot;id&quot;,&#xd;
                        &quot;attempts&quot;: &quot;1&quot;,&#xd;
                        &quot;expectedDocumentSide&quot;: &quot;front&quot;,&#xd;
                        &quot;moduleId&quot;: &quot;id_card_validation&quot;,&#xd;
                        &quot;croppedImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-front.png&quot;,&#xd;
                        &quot;imageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-front.png&quot;,&#xd;
                        &quot;apiResponse&quot;: {&#xd;
                            &quot;status&quot;: &quot;success&quot;,&#xd;
                            &quot;statusCode&quot;: 200,&#xd;
                            &quot;metadata&quot;: {&#xd;
                                &quot;requestId&quot;: &quot;1739181763572-82e5292e-b04d-4ff1-a70a-b204ac0f8bfb&quot;,&#xd;
                                &quot;transactionId&quot;: &quot;1338449951351881728&quot;&#xd;
                            },&#xd;
                            &quot;result&quot;: {&#xd;
                                &quot;details&quot;: [&#xd;
                                    {&#xd;
                                        &quot;idType&quot;: &quot;cccd_chip_front&quot;,&#xd;
                                        &quot;fieldsExtracted&quot;: {&#xd;
                                            &quot;firstName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;middleName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;lastName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;fullName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;T·ªêNG GIANG HUY&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;dateOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;06-12-1991&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;dateOfIssue&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;dateOfExpiry&quot;: {&#xd;
                                                &quot;value&quot;: &quot;06-12-2031&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;countryCode&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;type&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;address&quot;: {&#xd;
                                                &quot;value&quot;: &quot;417/23/107 Quang Trung,Ph∆∞·ªùng 10, G√≤ V·∫•p,TP.HCM&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 84,&#xd;
                                                &quot;additionalInfo&quot;: &quot;phng 10 g vptphcm&quot;,&#xd;
                                                &quot;street&quot;: &quot;417/23/107 QUANG TRUNG&quot;,&#xd;
                                                &quot;houseNumber&quot;: &quot;&quot;,&#xd;
                                                &quot;district&quot;: &quot;QU·∫¨N G√í V·∫§P&quot;,&#xd;
                                                &quot;province&quot;: &quot;TH√ÄNH PH·ªê H·ªí CH√ç MINH&quot;,&#xd;
                                                &quot;zipCode&quot;: &quot;&quot;&#xd;
                                            },&#xd;
                                            &quot;gender&quot;: {&#xd;
                                                &quot;value&quot;: &quot;M&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;idNumber&quot;: {&#xd;
                                                &quot;value&quot;: &quot;${idNumberOnboard}&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;placeOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;placeOfIssue&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;yearOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;1991&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;age&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;fatherName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;motherName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;husbandName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;spouseName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;nationality&quot;: {&#xd;
                                                &quot;value&quot;: &quot;Vi·ªát Nam&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;mrzString&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;idNumber&quot;: &quot;&quot;,&#xd;
                                                &quot;fullName&quot;: &quot;&quot;,&#xd;
                                                &quot;gender&quot;: &quot;&quot;,&#xd;
                                                &quot;dateOfBirth&quot;: &quot;&quot;,&#xd;
                                                &quot;dateOfExpiry&quot;: &quot;&quot;,&#xd;
                                                &quot;nationality&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;homeTown&quot;: {&#xd;
                                                &quot;value&quot;: &quot;Thanh T√¢n, Thanh Li√™m, H√† Nam&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            }&#xd;
                                        },&#xd;
                                        &quot;croppedImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-front.png&quot;,&#xd;
                                        &quot;isWrongSide&quot;: &quot;no&quot;,&#xd;
                                        &quot;qualityChecks&quot;: {&#xd;
                                            &quot;blur&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 99,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;glare&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 10,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;blackAndWhite&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 100,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;partialId&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 97,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;faceNotDetected&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 99,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        },&#xd;
                                        &quot;tamperChecks&quot;: {&#xd;
                                            &quot;photoTampered&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        },&#xd;
                                        &quot;ruleChecks&quot;: {&#xd;
                                            &quot;idNumberLengthMismatch&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;expiredID&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;idProvinceCodeInvalid&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;idDOBGenderCodeInvalid&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        }&#xd;
                                    }&#xd;
                                ],&#xd;
                                &quot;summary&quot;: {&#xd;
                                    &quot;action&quot;: &quot;pass&quot;,&#xd;
                                    &quot;details&quot;: []&#xd;
                                }&#xd;
                            }&#xd;
                        }&#xd;
                    },&#xd;
                    {&#xd;
                        &quot;module&quot;: &quot;&quot;,&#xd;
                        &quot;countrySelected&quot;: &quot;vnm&quot;,&#xd;
                        &quot;documentSelected&quot;: &quot;id&quot;,&#xd;
                        &quot;attempts&quot;: &quot;1&quot;,&#xd;
                        &quot;expectedDocumentSide&quot;: &quot;back&quot;,&#xd;
                        &quot;moduleId&quot;: &quot;id_card_validation&quot;,&#xd;
                        &quot;croppedImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-back.png&quot;,&#xd;
                        &quot;imageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-back.png&quot;,&#xd;
                        &quot;apiResponse&quot;: {&#xd;
                            &quot;status&quot;: &quot;success&quot;,&#xd;
                            &quot;statusCode&quot;: 200,&#xd;
                            &quot;metadata&quot;: {&#xd;
                                &quot;requestId&quot;: &quot;1739181772244-91a1855e-d36d-4653-a96e-826e1bfb6d28&quot;,&#xd;
                                &quot;transactionId&quot;: &quot;1338449951351881728&quot;&#xd;
                            },&#xd;
                            &quot;result&quot;: {&#xd;
                                &quot;details&quot;: [&#xd;
                                    {&#xd;
                                        &quot;idType&quot;: &quot;cccd_chip_back&quot;,&#xd;
                                        &quot;fieldsExtracted&quot;: {&#xd;
                                            &quot;firstName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;middleName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;lastName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;fullName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;dateOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;dateOfIssue&quot;: {&#xd;
                                                &quot;value&quot;: &quot;29-07-2022&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;dateOfExpiry&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;countryCode&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;type&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;address&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;additionalInfo&quot;: &quot;&quot;,&#xd;
                                                &quot;street&quot;: &quot;&quot;,&#xd;
                                                &quot;houseNumber&quot;: &quot;&quot;,&#xd;
                                                &quot;district&quot;: &quot;&quot;,&#xd;
                                                &quot;province&quot;: &quot;&quot;,&#xd;
                                                &quot;zipCode&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;gender&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;idNumber&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;placeOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;placeOfIssue&quot;: {&#xd;
                                                &quot;value&quot;: &quot;C·ª§C TR∆Ø·ªûNG C·ª§C C·∫¢NH S√ÅT QU·∫¢N L√ù H√ÄNH CH√çNH V·ªÄ TR·∫¨T T·ª∞ X√É H·ªòI&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 95&#xd;
                                            },&#xd;
                                            &quot;yearOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;age&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;fatherName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;motherName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;husbandName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;spouseName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;nationality&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;mrzString&quot;: {&#xd;
                                                &quot;value&quot;: &quot;IDVNM0910018153044091001815&lt;&lt;99112067M3112065VNM&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;4TONG&lt;&lt;GIANG&lt;HUY&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100,&#xd;
                                                &quot;idNumber&quot;: &quot;044091001815&quot;,&#xd;
                                                &quot;fullName&quot;: &quot;TONG GIANG HUY&quot;,&#xd;
                                                &quot;gender&quot;: &quot;M&quot;,&#xd;
                                                &quot;dateOfBirth&quot;: &quot;06-12-1991&quot;,&#xd;
                                                &quot;dateOfExpiry&quot;: &quot;06-12-2031&quot;,&#xd;
                                                &quot;nationality&quot;: &quot;VNM&quot;&#xd;
                                            },&#xd;
                                            &quot;homeTown&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        },&#xd;
                                        &quot;croppedImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-back.png&quot;,&#xd;
                                        &quot;isWrongSide&quot;: &quot;no&quot;,&#xd;
                                        &quot;qualityChecks&quot;: {&#xd;
                                            &quot;blur&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 100,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;glare&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 10,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;blackAndWhite&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 100,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;partialId&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 97,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        },&#xd;
                                        &quot;ruleChecks&quot;: {&#xd;
                                            &quot;mrzTampered&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        }&#xd;
                                    }&#xd;
                                ],&#xd;
                                &quot;summary&quot;: {&#xd;
                                    &quot;action&quot;: &quot;pass&quot;,&#xd;
                                    &quot;details&quot;: []&#xd;
                                }&#xd;
                            }&#xd;
                        }&#xd;
                    },&#xd;
                    {&#xd;
                        &quot;module&quot;: &quot;&quot;,&#xd;
                        &quot;attempts&quot;: &quot;1&quot;,&#xd;
                        &quot;moduleId&quot;: &quot;module_selfie&quot;,&#xd;
                        &quot;imageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-selfie.png&quot;,&#xd;
                        &quot;apiResponse&quot;: {&#xd;
                            &quot;status&quot;: &quot;success&quot;,&#xd;
                            &quot;statusCode&quot;: 200,&#xd;
                            &quot;metadata&quot;: {&#xd;
                                &quot;requestId&quot;: &quot;1739181795321-b0441577-1cd6-4427-99cf-83d6c3b83578&quot;,&#xd;
                                &quot;transactionId&quot;: &quot;1338449951351881728&quot;&#xd;
                            },&#xd;
                            &quot;result&quot;: {&#xd;
                                &quot;details&quot;: {&#xd;
                                    &quot;liveFace&quot;: {&#xd;
                                        &quot;value&quot;: &quot;yes&quot;,&#xd;
                                        &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                        &quot;score&quot;: 100&#xd;
                                    },&#xd;
                                    &quot;qualityChecks&quot;: {&#xd;
                                        &quot;blur&quot;: {&#xd;
                                            &quot;score&quot;: 95,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;eyesClosed&quot;: {&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;eyewear&quot;: {&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;faceOccluded&quot;: {&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;hat&quot;: {&#xd;
                                            &quot;score&quot;: 99,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;headTurned&quot;: {&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;maskPresent&quot;: {&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;multipleFaces&quot;: {&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;nudity&quot;: {&#xd;
                                            &quot;score&quot;: 100,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        }&#xd;
                                    }&#xd;
                                },&#xd;
                                &quot;summary&quot;: {&#xd;
                                    &quot;action&quot;: &quot;pass&quot;,&#xd;
                                    &quot;details&quot;: []&#xd;
                                }&#xd;
                            }&#xd;
                        }&#xd;
                    },&#xd;
                    {&#xd;
                        &quot;module&quot;: &quot;&quot;,&#xd;
                        &quot;moduleId&quot;: &quot;module_facematch&quot;,&#xd;
                        &quot;idImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-front.png&quot;,&#xd;
                        &quot;selfieImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-selfie.png&quot;,&#xd;
                        &quot;apiResponse&quot;: {&#xd;
                            &quot;status&quot;: &quot;success&quot;,&#xd;
                            &quot;statusCode&quot;: 200,&#xd;
                            &quot;metadata&quot;: {&#xd;
                                &quot;requestId&quot;: &quot;1739181797020-920ed817-6375-43a8-b0ad-47c42281f81c&quot;,&#xd;
                                &quot;transactionId&quot;: &quot;1338449951351881728&quot;&#xd;
                            },&#xd;
                            &quot;result&quot;: {&#xd;
                                &quot;details&quot;: {&#xd;
                                    &quot;match&quot;: {&#xd;
                                        &quot;value&quot;: &quot;yes&quot;,&#xd;
                                        &quot;score&quot;: 99,&#xd;
                                        &quot;confidence&quot;: &quot;high&quot;&#xd;
                                    }&#xd;
                                },&#xd;
                                &quot;summary&quot;: {&#xd;
                                    &quot;action&quot;: &quot;pass&quot;,&#xd;
                                    &quot;details&quot;: []&#xd;
                                }&#xd;
                            }&#xd;
                        },&#xd;
                        &quot;attempts&quot;: &quot;1&quot;&#xd;
                    }&#xd;
                ],&#xd;
                &quot;userDetails&quot;: {&#xd;
                    &quot;facematchAction&quot;: &quot;pass&quot;,&#xd;
                    &quot;facematchRequestId&quot;: &quot;1739181797020-920ed817-6375-43a8-b0ad-47c42281f81c&quot;,&#xd;
                    &quot;selfieAction&quot;: &quot;pass&quot;,&#xd;
                    &quot;selfieRequestId&quot;: &quot;1739181795321-b0441577-1cd6-4427-99cf-83d6c3b83578&quot;&#xd;
                }&#xd;
            }&#xd;
        },&#xd;
        &quot;headers&quot;: {&#xd;
            &quot;Content-Type&quot;: &quot;application/json&quot;&#xd;
        },&#xd;
        &quot;transformers&quot;: [&#xd;
            &quot;response-template&quot;&#xd;
        ]&#xd;
    },&#xd;
    &quot;priority&quot;: 2,&#xd;
    &quot;metadata&quot;: {&#xd;
        &quot;wiremock-gui&quot;: {&#xd;
            &quot;folder&quot;: &quot;/mappings/hyperverge/jmeter&quot;&#xd;
        }&#xd;
    }&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <JSR223PreProcessor guiclass="TestBeanGUI" testclass="JSR223PreProcessor" testname="JSR223 PreProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">//log.info(&quot;-----[MOCK] Hyperverge OCR-----&quot;);

//def digits = Long.toString(${phoneNumberOnboard});
//def CCCD = &quot;044091&quot; + digits[-6..-1]
//vars.put(&quot;idNumber&quot;, CCCD)
//log.info(&quot; \n ------------------&gt; id number: &quot; + CCCD);</stringProp>
            </JSR223PreProcessor>
            <hashTree/>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">OBD-Authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${accessToken}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.4 ---------- [MOCK] HYPERVEGER OCR - CREATE ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;201&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Tr√≠ch xu·∫•t `idHyperVergeOCR`
def idHyperVergeOCRNew = jsonResponse?.id ?: null

// ‚úÖ Ki·ªÉm tra idHyperVergeOCR
if (idHyperVergeOCRNew) {
    vars.put(&quot;idHyperVergeOCRNew&quot;, idHyperVergeOCRNew);
    log.info(&quot;‚úÖ idHyperVergeOCR Extracted: &quot; + idHyperVergeOCRNew);
} else {
    log.error(&quot;‚ùå idHyperVergeOCR not found!&quot;);
}</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.4 [MOCK] Hyperverge OCR - Update">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.domain">wiremock.sit.galaxyfinx.in</stringProp>
            <stringProp name="HTTPSampler.protocol">https</stringProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">__admin/mappings/${hpvOcrMockingId}</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">PUT</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;name&quot;: &quot;jmeter-hyperverge-mocking-huytong-qa&quot;,&#xd;
    &quot;persistent&quot;: true,&#xd;
    &quot;request&quot;: {&#xd;
        &quot;url&quot;: &quot;/hyperverge/v1/link-kyc/results&quot;,&#xd;
        &quot;method&quot;: &quot;POST&quot;,&#xd;
        &quot;bodyPatterns&quot;: [&#xd;
            {&#xd;
                &quot;matchesJsonPath&quot;: &quot;$[?(@.transactionId == &apos;${onboardingId}&apos;)]&quot;&#xd;
            }&#xd;
        ]&#xd;
    },&#xd;
    &quot;response&quot;: {&#xd;
        &quot;status&quot;: 200,&#xd;
        &quot;jsonBody&quot;: {&#xd;
            &quot;status&quot;: &quot;success&quot;,&#xd;
            &quot;statusCode&quot;: 200,&#xd;
            &quot;metadata&quot;: {&#xd;
                &quot;requestId&quot;: &quot;bf65e9b1275f559916b0ec0678523991&quot;,&#xd;
                &quot;transactionId&quot;: &quot;1338449951351881728&quot;&#xd;
            },&#xd;
            &quot;result&quot;: {&#xd;
                &quot;workflowDetails&quot;: {&#xd;
                    &quot;workflowId&quot;: &quot;document_verification&quot;,&#xd;
                    &quot;version&quot;: 1&#xd;
                },&#xd;
                &quot;applicationStatus&quot;: &quot;auto_approved&quot;,&#xd;
                &quot;results&quot;: [&#xd;
                    {&#xd;
                        &quot;module&quot;: &quot;&quot;,&#xd;
                        &quot;countrySelected&quot;: &quot;vnm&quot;,&#xd;
                        &quot;documentSelected&quot;: &quot;id&quot;,&#xd;
                        &quot;attempts&quot;: &quot;1&quot;,&#xd;
                        &quot;expectedDocumentSide&quot;: &quot;front&quot;,&#xd;
                        &quot;moduleId&quot;: &quot;id_card_validation&quot;,&#xd;
                        &quot;croppedImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-front.png&quot;,&#xd;
                        &quot;imageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-front.png&quot;,&#xd;
                        &quot;apiResponse&quot;: {&#xd;
                            &quot;status&quot;: &quot;success&quot;,&#xd;
                            &quot;statusCode&quot;: 200,&#xd;
                            &quot;metadata&quot;: {&#xd;
                                &quot;requestId&quot;: &quot;1739181763572-82e5292e-b04d-4ff1-a70a-b204ac0f8bfb&quot;,&#xd;
                                &quot;transactionId&quot;: &quot;1338449951351881728&quot;&#xd;
                            },&#xd;
                            &quot;result&quot;: {&#xd;
                                &quot;details&quot;: [&#xd;
                                    {&#xd;
                                        &quot;idType&quot;: &quot;cccd_chip_front&quot;,&#xd;
                                        &quot;fieldsExtracted&quot;: {&#xd;
                                            &quot;firstName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;middleName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;lastName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;fullName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;T·ªêNG GIANG HUY&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;dateOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;06-12-1991&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;dateOfIssue&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;dateOfExpiry&quot;: {&#xd;
                                                &quot;value&quot;: &quot;06-12-2031&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;countryCode&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;type&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;address&quot;: {&#xd;
                                                &quot;value&quot;: &quot;417/23/107 Quang Trung,Ph∆∞·ªùng 10, G√≤ V·∫•p,TP.HCM&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 84,&#xd;
                                                &quot;additionalInfo&quot;: &quot;phng 10 g vptphcm&quot;,&#xd;
                                                &quot;street&quot;: &quot;417/23/107 QUANG TRUNG&quot;,&#xd;
                                                &quot;houseNumber&quot;: &quot;&quot;,&#xd;
                                                &quot;district&quot;: &quot;QU·∫¨N G√í V·∫§P&quot;,&#xd;
                                                &quot;province&quot;: &quot;TH√ÄNH PH·ªê H·ªí CH√ç MINH&quot;,&#xd;
                                                &quot;zipCode&quot;: &quot;&quot;&#xd;
                                            },&#xd;
                                            &quot;gender&quot;: {&#xd;
                                                &quot;value&quot;: &quot;M&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;idNumber&quot;: {&#xd;
                                                &quot;value&quot;: &quot;${idNumberOnboard}&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;placeOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;placeOfIssue&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;yearOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;1991&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;age&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;fatherName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;motherName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;husbandName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;spouseName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;nationality&quot;: {&#xd;
                                                &quot;value&quot;: &quot;Vi·ªát Nam&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;mrzString&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;idNumber&quot;: &quot;&quot;,&#xd;
                                                &quot;fullName&quot;: &quot;&quot;,&#xd;
                                                &quot;gender&quot;: &quot;&quot;,&#xd;
                                                &quot;dateOfBirth&quot;: &quot;&quot;,&#xd;
                                                &quot;dateOfExpiry&quot;: &quot;&quot;,&#xd;
                                                &quot;nationality&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;homeTown&quot;: {&#xd;
                                                &quot;value&quot;: &quot;Thanh T√¢n, Thanh Li√™m, H√† Nam&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            }&#xd;
                                        },&#xd;
                                        &quot;croppedImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-front.png&quot;,&#xd;
                                        &quot;isWrongSide&quot;: &quot;no&quot;,&#xd;
                                        &quot;qualityChecks&quot;: {&#xd;
                                            &quot;blur&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 99,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;glare&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 10,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;blackAndWhite&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 100,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;partialId&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 97,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;faceNotDetected&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 99,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        },&#xd;
                                        &quot;tamperChecks&quot;: {&#xd;
                                            &quot;photoTampered&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        },&#xd;
                                        &quot;ruleChecks&quot;: {&#xd;
                                            &quot;idNumberLengthMismatch&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;expiredID&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;idProvinceCodeInvalid&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;idDOBGenderCodeInvalid&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        }&#xd;
                                    }&#xd;
                                ],&#xd;
                                &quot;summary&quot;: {&#xd;
                                    &quot;action&quot;: &quot;pass&quot;,&#xd;
                                    &quot;details&quot;: []&#xd;
                                }&#xd;
                            }&#xd;
                        }&#xd;
                    },&#xd;
                    {&#xd;
                        &quot;module&quot;: &quot;&quot;,&#xd;
                        &quot;countrySelected&quot;: &quot;vnm&quot;,&#xd;
                        &quot;documentSelected&quot;: &quot;id&quot;,&#xd;
                        &quot;attempts&quot;: &quot;1&quot;,&#xd;
                        &quot;expectedDocumentSide&quot;: &quot;back&quot;,&#xd;
                        &quot;moduleId&quot;: &quot;id_card_validation&quot;,&#xd;
                        &quot;croppedImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-back.png&quot;,&#xd;
                        &quot;imageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-back.png&quot;,&#xd;
                        &quot;apiResponse&quot;: {&#xd;
                            &quot;status&quot;: &quot;success&quot;,&#xd;
                            &quot;statusCode&quot;: 200,&#xd;
                            &quot;metadata&quot;: {&#xd;
                                &quot;requestId&quot;: &quot;1739181772244-91a1855e-d36d-4653-a96e-826e1bfb6d28&quot;,&#xd;
                                &quot;transactionId&quot;: &quot;1338449951351881728&quot;&#xd;
                            },&#xd;
                            &quot;result&quot;: {&#xd;
                                &quot;details&quot;: [&#xd;
                                    {&#xd;
                                        &quot;idType&quot;: &quot;cccd_chip_back&quot;,&#xd;
                                        &quot;fieldsExtracted&quot;: {&#xd;
                                            &quot;firstName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;middleName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;lastName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;fullName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;dateOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;dateOfIssue&quot;: {&#xd;
                                                &quot;value&quot;: &quot;29-07-2022&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100&#xd;
                                            },&#xd;
                                            &quot;dateOfExpiry&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;countryCode&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;type&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;address&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;additionalInfo&quot;: &quot;&quot;,&#xd;
                                                &quot;street&quot;: &quot;&quot;,&#xd;
                                                &quot;houseNumber&quot;: &quot;&quot;,&#xd;
                                                &quot;district&quot;: &quot;&quot;,&#xd;
                                                &quot;province&quot;: &quot;&quot;,&#xd;
                                                &quot;zipCode&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;gender&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;idNumber&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;placeOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;placeOfIssue&quot;: {&#xd;
                                                &quot;value&quot;: &quot;C·ª§C TR∆Ø·ªûNG C·ª§C C·∫¢NH S√ÅT QU·∫¢N L√ù H√ÄNH CH√çNH V·ªÄ TR·∫¨T T·ª∞ X√É H·ªòI&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 95&#xd;
                                            },&#xd;
                                            &quot;yearOfBirth&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;age&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;fatherName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;motherName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;husbandName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;spouseName&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;nationality&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;mrzString&quot;: {&#xd;
                                                &quot;value&quot;: &quot;IDVNM0910018153044091001815&lt;&lt;99112067M3112065VNM&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;4TONG&lt;&lt;GIANG&lt;HUY&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                                &quot;score&quot;: 100,&#xd;
                                                &quot;idNumber&quot;: &quot;044091001815&quot;,&#xd;
                                                &quot;fullName&quot;: &quot;TONG GIANG HUY&quot;,&#xd;
                                                &quot;gender&quot;: &quot;M&quot;,&#xd;
                                                &quot;dateOfBirth&quot;: &quot;06-12-1991&quot;,&#xd;
                                                &quot;dateOfExpiry&quot;: &quot;06-12-2031&quot;,&#xd;
                                                &quot;nationality&quot;: &quot;VNM&quot;&#xd;
                                            },&#xd;
                                            &quot;homeTown&quot;: {&#xd;
                                                &quot;value&quot;: &quot;&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        },&#xd;
                                        &quot;croppedImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-back.png&quot;,&#xd;
                                        &quot;isWrongSide&quot;: &quot;no&quot;,&#xd;
                                        &quot;qualityChecks&quot;: {&#xd;
                                            &quot;blur&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 100,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;glare&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 10,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;blackAndWhite&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 100,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            },&#xd;
                                            &quot;partialId&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 97,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        },&#xd;
                                        &quot;ruleChecks&quot;: {&#xd;
                                            &quot;mrzTampered&quot;: {&#xd;
                                                &quot;value&quot;: &quot;no&quot;,&#xd;
                                                &quot;score&quot;: 0,&#xd;
                                                &quot;confidence&quot;: &quot;high&quot;&#xd;
                                            }&#xd;
                                        }&#xd;
                                    }&#xd;
                                ],&#xd;
                                &quot;summary&quot;: {&#xd;
                                    &quot;action&quot;: &quot;pass&quot;,&#xd;
                                    &quot;details&quot;: []&#xd;
                                }&#xd;
                            }&#xd;
                        }&#xd;
                    },&#xd;
                    {&#xd;
                        &quot;module&quot;: &quot;&quot;,&#xd;
                        &quot;attempts&quot;: &quot;1&quot;,&#xd;
                        &quot;moduleId&quot;: &quot;module_selfie&quot;,&#xd;
                        &quot;imageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-selfie.png&quot;,&#xd;
                        &quot;apiResponse&quot;: {&#xd;
                            &quot;status&quot;: &quot;success&quot;,&#xd;
                            &quot;statusCode&quot;: 200,&#xd;
                            &quot;metadata&quot;: {&#xd;
                                &quot;requestId&quot;: &quot;1739181795321-b0441577-1cd6-4427-99cf-83d6c3b83578&quot;,&#xd;
                                &quot;transactionId&quot;: &quot;1338449951351881728&quot;&#xd;
                            },&#xd;
                            &quot;result&quot;: {&#xd;
                                &quot;details&quot;: {&#xd;
                                    &quot;liveFace&quot;: {&#xd;
                                        &quot;value&quot;: &quot;yes&quot;,&#xd;
                                        &quot;confidence&quot;: &quot;high&quot;,&#xd;
                                        &quot;score&quot;: 100&#xd;
                                    },&#xd;
                                    &quot;qualityChecks&quot;: {&#xd;
                                        &quot;blur&quot;: {&#xd;
                                            &quot;score&quot;: 95,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;eyesClosed&quot;: {&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;eyewear&quot;: {&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;faceOccluded&quot;: {&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;hat&quot;: {&#xd;
                                            &quot;score&quot;: 99,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;headTurned&quot;: {&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;maskPresent&quot;: {&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;multipleFaces&quot;: {&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;score&quot;: 0,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        },&#xd;
                                        &quot;nudity&quot;: {&#xd;
                                            &quot;score&quot;: 100,&#xd;
                                            &quot;value&quot;: &quot;no&quot;,&#xd;
                                            &quot;confidence&quot;: &quot;high&quot;&#xd;
                                        }&#xd;
                                    }&#xd;
                                },&#xd;
                                &quot;summary&quot;: {&#xd;
                                    &quot;action&quot;: &quot;pass&quot;,&#xd;
                                    &quot;details&quot;: []&#xd;
                                }&#xd;
                            }&#xd;
                        }&#xd;
                    },&#xd;
                    {&#xd;
                        &quot;module&quot;: &quot;&quot;,&#xd;
                        &quot;moduleId&quot;: &quot;module_facematch&quot;,&#xd;
                        &quot;idImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-front.png&quot;,&#xd;
                        &quot;selfieImageUrl&quot;: &quot;https://wiremock.sit.galaxyfinx.in/huytongqa/huytong-selfie.png&quot;,&#xd;
                        &quot;apiResponse&quot;: {&#xd;
                            &quot;status&quot;: &quot;success&quot;,&#xd;
                            &quot;statusCode&quot;: 200,&#xd;
                            &quot;metadata&quot;: {&#xd;
                                &quot;requestId&quot;: &quot;1739181797020-920ed817-6375-43a8-b0ad-47c42281f81c&quot;,&#xd;
                                &quot;transactionId&quot;: &quot;1338449951351881728&quot;&#xd;
                            },&#xd;
                            &quot;result&quot;: {&#xd;
                                &quot;details&quot;: {&#xd;
                                    &quot;match&quot;: {&#xd;
                                        &quot;value&quot;: &quot;yes&quot;,&#xd;
                                        &quot;score&quot;: 99,&#xd;
                                        &quot;confidence&quot;: &quot;high&quot;&#xd;
                                    }&#xd;
                                },&#xd;
                                &quot;summary&quot;: {&#xd;
                                    &quot;action&quot;: &quot;pass&quot;,&#xd;
                                    &quot;details&quot;: []&#xd;
                                }&#xd;
                            }&#xd;
                        },&#xd;
                        &quot;attempts&quot;: &quot;1&quot;&#xd;
                    }&#xd;
                ],&#xd;
                &quot;userDetails&quot;: {&#xd;
                    &quot;facematchAction&quot;: &quot;pass&quot;,&#xd;
                    &quot;facematchRequestId&quot;: &quot;1739181797020-920ed817-6375-43a8-b0ad-47c42281f81c&quot;,&#xd;
                    &quot;selfieAction&quot;: &quot;pass&quot;,&#xd;
                    &quot;selfieRequestId&quot;: &quot;1739181795321-b0441577-1cd6-4427-99cf-83d6c3b83578&quot;&#xd;
                }&#xd;
            }&#xd;
        },&#xd;
        &quot;headers&quot;: {&#xd;
            &quot;Content-Type&quot;: &quot;application/json&quot;&#xd;
        },&#xd;
        &quot;transformers&quot;: [&#xd;
            &quot;response-template&quot;&#xd;
        ]&#xd;
    },&#xd;
    &quot;priority&quot;: 2,&#xd;
    &quot;metadata&quot;: {&#xd;
        &quot;wiremock-gui&quot;: {&#xd;
            &quot;folder&quot;: &quot;/mappings/hyperverge/jmeter&quot;&#xd;
        }&#xd;
    }&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <JSR223PreProcessor guiclass="TestBeanGUI" testclass="JSR223PreProcessor" testname="JSR223 PreProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">//log.info(&quot;-----[MOCK] Hyperverge OCR-----&quot;);

//def digits = Long.toString(${phoneNumberOnboard});
//def CCCD = &quot;044091&quot; + digits[-6..-1]
//vars.put(&quot;idNumber&quot;, CCCD)
//log.info(&quot; \n ------------------&gt; id number: &quot; + CCCD);</stringProp>
            </JSR223PreProcessor>
            <hashTree/>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">OBD-Authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${accessToken}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.4 ---------- [MOCK] HYPERVEGER OCR - UPDATE ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Tr√≠ch xu·∫•t `idHyperVergeOCR`
def idHyperVergeOCR = jsonResponse?.id ?: null

// ‚úÖ Ki·ªÉm tra idHyperVergeOCR
if (idHyperVergeOCR) {
    vars.put(&quot;idHyperVergeOCR&quot;, idHyperVergeOCR);
    log.info(&quot;‚úÖ idHyperVergeOCR Extracted: &quot; + idHyperVergeOCR);
} else {
    log.error(&quot;‚ùå idHyperVergeOCR not found!&quot;);
}</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.5 [MOCK] HDB biometric">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.domain">wiremock.sit.galaxyfinx.in</stringProp>
            <stringProp name="HTTPSampler.protocol">https</stringProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">__admin/mappings/${hdbBiometricMockingId}</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">PUT</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;name&quot;: &quot;jmeter-hdb-biometric-huytong-qa&quot;,&#xd;
    &quot;persistent&quot;: true,&#xd;
    &quot;request&quot;: {&#xd;
        &quot;url&quot;: &quot;/hdb-biometric/face-service/v1/customer/list-filter?card_id=${idNumberOnboard}&quot;,&#xd;
        &quot;method&quot;: &quot;GET&quot;&#xd;
    },&#xd;
    &quot;response&quot;: {&#xd;
        &quot;status&quot;: 200,&#xd;
        &quot;jsonBody&quot;: {&#xd;
            &quot;transaction_id&quot;: &quot;a34606b6-1641-4a97-8b43-cacee5b588f6&quot;,&#xd;
            &quot;log_id&quot;: &quot;4ac23f34-04d3-11f0-9ba6-ffc62f1046f0-915dc790-apigateway-service-84d657594f-svzwm&quot;,&#xd;
            &quot;data_base64&quot;: &quot;eyJ0cmFuc2FjdGlvbl9pZCI6ImEzNDYwNmI2LTE2NDEtNGE5Ny04YjQzLWNhY2VlNWI1ODhmNiIsImxvZ19pZCI6IjRhYzIzZjM0LTA0ZDMtMTFmMC05YmE2LWZmYzYyZjEwNDZmMC05MTVkYzc5MC1hcGlnYXRld2F5LXNlcnZpY2UtODRkNjU3NTk0Zi1zdnp3bSIsIm1lc3NhZ2UiOiJJREctMDAwMDAwMDAiLCJvYmplY3QiOnsiY3VzdG9tZXJfZmFjZXMiOlt7ImltYWdlX3VybCI6ImVreWMtY2ljL3Zla3ljdXBsb2FkL2lkZ3YyLXR5cGUzMS1kNjNkOGRiNC0yMzIyLTRmNzYtYjVkZi1iYzQzZDM3YzdjMTMvMjAyNTAzMDcvM2I4MjE3MzQtZmIzZS0xMWVmLWFlMGItMDc0ZGZjNjkwYjgzLmpwZWciLCJncm91cF9jdXN0b21lciI6IkZhY2Ugc2VsZmllIiwiY2hhbm5lbCI6IlZJS0tJIiwidmVyaWZ5X3N0YXR1cyI6MCwiY3JlYXRlZF9kYXRlIjoiMDcvMDMvMjAyNSAxMDoyMzo0NSIsInN0YXR1cyI6MH0seyJpbWFnZV91cmwiOiJla3ljLWNpYy92ZWt5Y3VwbG9hZC9pZGd2Mi10eXBlMzEtZDYzZDhkYjQtMjMyMi00Zjc2LWI1ZGYtYmM0M2QzN2M3YzEzLzIwMjQxMDA4L2U3ZTZiODk2LTg1MmItMTFlZi1hZDM5LTRmOTJhZTg2Mzc0Ni5qcGVnIiwiZ3JvdXBfY3VzdG9tZXIiOiJGYWNlIGNoaXAiLCJjaGFubmVsIjoiVklLS0kiLCJ2ZXJpZnlfc3RhdHVzIjoxLCJjcmVhdGVkX2RhdGUiOiIwOC8xMC8yMDI0IDExOjE1OjE0Iiwic3RhdHVzIjoxfV0sInV1aWRfY3VzdG9tZXIiOiI4MmI5MmRkOS0xMzcwLTRhOTgtOGMyZi1lMTc0NTBiYTIzMWIiLCJjdXN0b21lcl9jYXJkcyI6W3sib3JpZ2luX2xvY2F0aW9uIjoiVGhhbmggVMOibiwgVGhhbmggTGnDqm0sIEjDoCBOYW0iLCJyZWNlbnRfbG9jYXRpb24iOiJT4buRIE5ow6AgNDE3LzIzLzEwNyDEkMaw4budbmcgUXVhbmcgVHJ1bmcsIFBoxrDhu51uZyAxMCwgR8OyIFbhuqVwLCBUUC5I4buTIENow60gTWluaCIsImV0aG5pYyI6IktpbmgiLCJnZW5kZXIiOiJOYW0iLCJkYWRfbmFtZSI6IlThu5FuZyBT4bu5IELDrG5oIiwicmVzdWx0X2MwNiI6eyJzaWduYXR1cmUiOiJLbzI3bE9wdFRZdThUTzZJVlpyUndMZVRiUEpRbzBqZG5jYnFHS05TQnk4aG9Ta1lkM0h5NnV4NVRSK00ycUVZc3lZT2ZNYmlwTTZ0NC9EMlNsK3FxazhGVEJTWGdOQ1ZrTFFiTDNhcFZySld4Ukc0K29TMTRDcXZZOG1lV0RpSmh0Rk8rTmdZSXljb0xTWUkxQ2cxbmJyMnd4MHdOU0lpYWRyY0ZnWUtBeEIzTmw3dHBlQ1NuTXlCS0tVZjZEaXR0U3N6cGlrZkxvK29EbXYvZTFST3VkVlNDRW9nOStTV2YzenJFNnFmRVprSzRld2UydDhiQlFHUzRpYWlGRWp4YXpqbzg5cnBhZDY4WlVIbmhDQXNmQy9XdGlwUW5MeExBMksrUlZ5bFJEQitNNkkrYSs2aFJRbWFmRXYzNHBKVkd4QU9FM2t1aFpwamp5UEppdEFMbXc9PSIsInJlc3BvbmRzIjp7InJlc3VsdCI6dHJ1ZSwicmVzcG9uc2VfaWQiOiJ2bnB0LTAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCIsImV4aXRjb2RlIjowLCJ0aW1lIjowLCJtZXNzYWdlIjoidmFsaWQgaWRjYXJkIiwicmVzcG9uc2VJZCI6InZucHQtMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwIn19LCJyZWxpZ2lvbiI6IlBo4bqtdCBnacOhbyIsImJpcnRoX2RheSI6IjA2LzEyLzE5OTEiLCJmZWF0dXJlcyI6IlPhurlvIGNvbmcgMCw1Y20gYzo1Y20gZMaw4bubaSBzYXUgxJF1w7RpIG3huq90IHBo4bqjaSIsInZhbGlkX2RhdGUiOiIwNi8xMi8yMDMxIiwibXJ6IjoiW0lEVk5NMDkxMDAxODE1MzA0NDA5MTAwMTgxNTw8OSwgOTExMjA2N00zMTEyMDY1Vk5NPDw8PDw8PDw8PDw0LCBUT05HPDxHSUFORzxIVVk8PDw8PDw8PDw8PDw8PDxdIiwibmF0aW9uYWxpdHkiOiJWaeG7h3QgTmFtIiwiaXNzdWVfZGF0ZSI6IjI5LzA3LzIwMjIiLCJuYW1lIjoiVOG7kW5nIEdpYW5nIEh1eSIsIm9sZF9pZCI6IjAyNDk3NTQ3MCIsImlkIjoiMDQ0MDkxMDAxODE1IiwibW9tX25hbWUiOiLEkGluaCBUaOG7iyBIb8OgaSJ9XX19&quot;,&#xd;
            &quot;data_sign&quot;: &quot;F5xMtMARdIm3Xyg+UJXb12HFt8EtecSHTtbsx2JtNfTNKKIAR4Vbrx0FjilFz7nJZ3QZHy2P669UL+4lnBTFqgova+/8jnb8+oXNT6oLCTq7oNZZ1eMfe0kSPkUJR/PDH48oi0az9hFi4TazChEK45IaXLvzMWKvPZhDC30vhlC6540dJtL0r0ncUJA6/TsoBAsuXBYPTKZ25LznxdPtTL8ENimRCRhIlZO5zBy3G3kTK72SDEUfpowMfUSx8yUqMixlvwr0D/NdX0iF8nNy0K+B80T37kw8JATuhgzuG4cQ4ZMKgk6NV8s8JAHCD2vKrLgtwufaMEHjf+G00QZGxQ==&quot;,&#xd;
            &quot;message&quot;: &quot;IDG-00000000&quot;,&#xd;
            &quot;object&quot;: {&#xd;
                &quot;customer_faces&quot;: [&#xd;
                    {&#xd;
                        &quot;image_url&quot;: &quot;ekyc-cic/vekycupload/idgv2-type31-d63d8db4-2322-4f76-b5df-bc43d37c7c13/20250307/3b821734-fb3e-11ef-ae0b-074dfc690b83.jpeg&quot;,&#xd;
                        &quot;group_customer&quot;: &quot;Face selfie&quot;,&#xd;
                        &quot;channel&quot;: &quot;VIKKI&quot;,&#xd;
                        &quot;verify_status&quot;: 0,&#xd;
                        &quot;created_date&quot;: &quot;07/03/2025 10:23:45&quot;,&#xd;
                        &quot;status&quot;: 0&#xd;
                    },&#xd;
                    {&#xd;
                        &quot;image_url&quot;: &quot;ekyc-cic/vekycupload/idgv2-type31-d63d8db4-2322-4f76-b5df-bc43d37c7c13/20241008/e7e6b896-852b-11ef-ad39-4f92ae863746.jpeg&quot;,&#xd;
                        &quot;group_customer&quot;: &quot;Face chip&quot;,&#xd;
                        &quot;channel&quot;: &quot;VIKKI&quot;,&#xd;
                        &quot;verify_status&quot;: 1,&#xd;
                        &quot;created_date&quot;: &quot;08/10/2024 11:15:14&quot;,&#xd;
                        &quot;status&quot;: 1&#xd;
                    }&#xd;
                ],&#xd;
                &quot;uuid_customer&quot;: &quot;82b92dd9-1370-4a98-8c2f-e17450ba231b&quot;,&#xd;
                &quot;customer_cards&quot;: [&#xd;
                    {&#xd;
                        &quot;origin_location&quot;: &quot;Thanh T√¢n, Thanh Li√™m, H√† Nam&quot;,&#xd;
                        &quot;recent_location&quot;: &quot;S·ªë Nh√† 417/23/107 ƒê∆∞·ªùng Quang Trung, Ph∆∞·ªùng 10, G√≤ V·∫•p, TP.H·ªì Ch√≠ Minh&quot;,&#xd;
                        &quot;ethnic&quot;: &quot;Kinh&quot;,&#xd;
                        &quot;gender&quot;: &quot;Nam&quot;,&#xd;
                        &quot;dad_name&quot;: &quot;T·ªëng S·ªπ B√¨nh&quot;,&#xd;
                        &quot;result_c06&quot;: {&#xd;
                            &quot;signature&quot;: &quot;Ko27lOptTYu8TO6IVZrRwLeTbPJQo0jdncbqGKNSBy8hoSkYd3Hy6ux5TR+M2qEYsyYOfMbipM6t4/D2Sl+qqk8FTBSXgNCVkLQbL3apVrJWxRG4+oS14CqvY8meWDiJhtFO+NgYIycoLSYI1Cg1nbr2wx0wNSIiadrcFgYKAxB3Nl7tpeCSnMyBKKUf6DittSszpikfLo+oDmv/e1ROudVSCEog9+SWf3zrE6qfEZkK4ewe2t8bBQGS4iaiFEjxazjo89rpad68ZUHnhCAsfC/WtipQnLxLA2K+RVylRDB+M6I+a+6hRQmafEv34pJVGxAOE3kuhZpjjyPJitALmw==&quot;,&#xd;
                            &quot;responds&quot;: {&#xd;
                                &quot;result&quot;: true,&#xd;
                                &quot;response_id&quot;: &quot;vnpt-00000000-0000-0000-0000-000000000000&quot;,&#xd;
                                &quot;exitcode&quot;: 0,&#xd;
                                &quot;time&quot;: 0,&#xd;
                                &quot;message&quot;: &quot;valid idcard&quot;,&#xd;
                                &quot;responseId&quot;: &quot;vnpt-00000000-0000-0000-0000-000000000000&quot;&#xd;
                            }&#xd;
                        },&#xd;
                        &quot;religion&quot;: &quot;Ph·∫≠t gi√°o&quot;,&#xd;
                        &quot;birth_day&quot;: &quot;06/12/1991&quot;,&#xd;
                        &quot;features&quot;: &quot;S·∫πo cong 0,5cm c:5cm d∆∞·ªõi sau ƒëu√¥i m·∫Øt ph·∫£i&quot;,&#xd;
                        &quot;valid_date&quot;: &quot;06/12/2031&quot;,&#xd;
                        &quot;mrz&quot;: &quot;[IDVNM0910018153044091001815&lt;&lt;9, 9112067M3112065VNM&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;4, TONG&lt;&lt;GIANG&lt;HUY&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;]&quot;,&#xd;
                        &quot;nationality&quot;: &quot;Vi·ªát Nam&quot;,&#xd;
                        &quot;issue_date&quot;: &quot;29/07/2022&quot;,&#xd;
                        &quot;name&quot;: &quot;T·ªëng Giang Huy&quot;,&#xd;
                        &quot;old_id&quot;: &quot;024975470&quot;,&#xd;
                        &quot;id&quot;: &quot;${idNumberOnboard}&quot;,&#xd;
                        &quot;mom_name&quot;: &quot;ƒêinh Th·ªã Ho√†i&quot;&#xd;
                    }&#xd;
                ]&#xd;
            }&#xd;
        },&#xd;
        &quot;headers&quot;: {&#xd;
            &quot;Content-Type&quot;: &quot;application/json&quot;&#xd;
        },&#xd;
        &quot;transformers&quot;: [&#xd;
            &quot;response-template&quot;&#xd;
        ]&#xd;
    },&#xd;
    &quot;priority&quot;: 2,&#xd;
    &quot;metadata&quot;: {&#xd;
        &quot;wiremock-gui&quot;: {&#xd;
            &quot;folder&quot;: &quot;/mappings/hdb-biometric/jmeter&quot;&#xd;
        }&#xd;
    }&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">OBD-Authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${accessToken}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.5 ---------- [MOCK] HDB BIOMETRIC ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Tr√≠ch xu·∫•t `hdbBiometricMockingId`
def hdbBiometricMockingId = jsonResponse?.id ?: null

// ‚úÖ Ki·ªÉm tra hdbBiometricMockingId
if (hdbBiometricMockingId) {
    vars.put(&quot;hdbBiometricMockingId&quot;, hdbBiometricMockingId);
    log.info(&quot;‚úÖ HDB Biometric Mock ID Extracted: &quot; + hdbBiometricMockingId);
} else {
    log.error(&quot;‚ùå HDB Biometric Mock ID not found!&quot;);
}</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.6 Pre check KYC" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/v4/onboarding/kyc/pre-check-kyc</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">false</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel" testclass="Arguments" testname="User Defined Variables">
              <collectionProp name="Arguments.arguments"/>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">OBD-Authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${accessToken}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.6 ---------- PRECHECK KYC ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Log k·∫øt qu·∫£ Precheck KYC
log.info(&quot;‚úÖ Precheck KYC th√†nh c√¥ng! Response: &quot; + jsonResponse);</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.7 Submit info" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/v4/onboarding/kyc/submit-info</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
     &quot;currentAddress&quot;: &quot;Test Address&quot;,&#xd;
	&quot;oldIdNumber&quot;: &quot;123123123&quot;,&#xd;
	&quot;languageCode&quot;: &quot;VI&quot;,&#xd;
	&quot;email&quot; : &quot;api@test.com&quot;,&#xd;
	&quot;isFatca&quot;: false,&#xd;
	&quot;isPep&quot;: false,&#xd;
	&quot;occupationCode&quot;: &quot;OC022&quot;,&#xd;
	&quot;jobPositionCode&quot;: &quot;P001&quot;,&#xd;
	&quot;issueDate&quot;: &quot;03-07-2013&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">OBD-Authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${accessToken}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.7 ---------- SUBMIT INFO ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Log k·∫øt qu·∫£ Submit Info
log.info(&quot;‚úÖ Submit Info th√†nh c√¥ng! Response: &quot; + jsonResponse);</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.8 Create Password" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/v4/onboarding/accountCreation/credential</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value"> { &#xd;
    &quot;password&quot;: &quot;QWJjZDEyMw==&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">x-session-id</stringProp>
                  <stringProp name="Header.value">${sessionId}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">OBD-Authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${accessToken}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.8 ---------- CREATE PASSWORD ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Tr√≠ch xu·∫•t `cifNumber`
def cifNumber = jsonResponse?.payload?.cifId ?: null

// ‚úÖ Ki·ªÉm tra cifNumber
if (cifNumber) {
    vars.put(&quot;cifNumber&quot;, cifNumber);
    log.info(&quot;‚úÖ T·∫°o m·∫≠t kh·∫©u th√†nh c√¥ng! CIF Number: &quot; + cifNumber);
} else {
    log.error(&quot;‚ùå CIF NUMBER NOT FOUND!&quot;);
}</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.9 Triger face dedup" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/v3/onboarding/kyc/check-face-dedup</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{ &#xd;
    &quot;os&quot;: &quot;IOS&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">x-session-id</stringProp>
                  <stringProp name="Header.value">${sessionId}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">OBD-Authorization</stringProp>
                  <stringProp name="Header.value">Bearer ${accessToken}</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.9 ---------- TRIGGER FACEDEDUP ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Log k·∫øt qu·∫£ Facededup Trigger
log.info(&quot;‚úÖ Facededup Trigger th√†nh c√¥ng! Response: &quot; + jsonResponse);</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <WhileController guiclass="WhileControllerGui" testclass="WhileController" testname="2.10 While loop to get KYC status" enabled="true">
            <stringProp name="WhileController.condition">${__groovy(
    def attempts = (vars.get(&quot;attempts&quot;) ?: &quot;0&quot;) as Integer;
    def kycStatus = vars.get(&quot;kycStatus&quot;);

    if (kycStatus == &quot;APPROVED&quot;) return false;
    if (attempts &gt;= 30) return false;
    
    return kycStatus == null || 
           kycStatus == &quot;N_A&quot; || 
           kycStatus == &quot;NEEDS_REVIEW&quot;
)}</stringProp>
          </WhileController>
          <hashTree>
            <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.10.1 Get KYC status" enabled="true">
              <intProp name="HTTPSampler.concurrentPool">6</intProp>
              <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
              <stringProp name="HTTPSampler.path">/v3/onboarding/kyc/kyc-status-with-details</stringProp>
              <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
              <stringProp name="HTTPSampler.method">GET</stringProp>
              <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
              <boolProp name="HTTPSampler.postBodyRaw">false</boolProp>
              <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel" testclass="Arguments" testname="User Defined Variables">
                <collectionProp name="Arguments.arguments"/>
              </elementProp>
            </HTTPSamplerProxy>
            <hashTree>
              <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
                <collectionProp name="HeaderManager.headers">
                  <elementProp name="x-request-id" elementType="Header">
                    <stringProp name="Header.name">x-request-id</stringProp>
                    <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                  </elementProp>
                  <elementProp name="gtw-authorization" elementType="Header">
                    <stringProp name="Header.name">gtw-authorization</stringProp>
                    <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                  </elementProp>
                  <elementProp name="x-open-id" elementType="Header">
                    <stringProp name="Header.name">x-open-id</stringProp>
                    <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                  </elementProp>
                  <elementProp name="Accept-Language" elementType="Header">
                    <stringProp name="Header.name">Accept-Language</stringProp>
                    <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                  </elementProp>
                  <elementProp name="Content-Type" elementType="Header">
                    <stringProp name="Header.name">Content-Type</stringProp>
                    <stringProp name="Header.value">application/json</stringProp>
                  </elementProp>
                  <elementProp name="Accept-Encoding" elementType="Header">
                    <stringProp name="Header.name">Accept-Encoding</stringProp>
                    <stringProp name="Header.value">gzip, deflate, br</stringProp>
                  </elementProp>
                  <elementProp name="User-Agent" elementType="Header">
                    <stringProp name="Header.name">User-Agent</stringProp>
                    <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                  </elementProp>
                  <elementProp name="Accept" elementType="Header">
                    <stringProp name="Header.name">Accept</stringProp>
                    <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                  </elementProp>
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">x-session-id</stringProp>
                    <stringProp name="Header.value">${sessionId}</stringProp>
                  </elementProp>
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">OBD-Authorization</stringProp>
                    <stringProp name="Header.value">Bearer ${accessToken}</stringProp>
                  </elementProp>
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">X-KEY</stringProp>
                    <stringProp name="Header.value">${publicKey}</stringProp>
                  </elementProp>
                </collectionProp>
              </HeaderManager>
              <hashTree/>
              <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
                <stringProp name="scriptLanguage">groovy</stringProp>
                <stringProp name="parameters"></stringProp>
                <stringProp name="filename"></stringProp>
                <stringProp name="cacheKey">true</stringProp>
                <stringProp name="script">import groovy.json.JsonSlurper;

// ‚úÖ TƒÉng s·ªë l·∫ßn th·ª≠ ki·ªÉm tra KYC
def attempts = Integer.parseInt(vars.get(&quot;attempts&quot;) ?: &quot;0&quot;) + 1;
vars.put(&quot;attempts&quot;, String.valueOf(attempts));

log.info(&quot; \n 2.10.1 ---------- CHECKING KYC STATUS &quot; + attempts +&quot; ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);

// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot;üìú Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot;üìú Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Tr√≠ch xu·∫•t th√¥ng tin KYC
def kycStatus = jsonResponse?.payload?.kycStatus?.trim() ?: &quot;N_A&quot;;
def needsReviewCheck = jsonResponse?.payload?.needsReviewCheck ?: [];
def declinedCheck = jsonResponse?.payload?.declinedCheck ?: [];
def payload = jsonResponse?.payload ?: &quot;N_A&quot;;

// ‚úÖ L∆∞u gi√° tr·ªã v√†o bi·∫øn JMeter
vars.put(&quot;kycStatus&quot;, kycStatus);
vars.put(&quot;needsReviewCheck&quot;, needsReviewCheck ? needsReviewCheck.join(&quot;,&quot;) : &quot;&quot;);
vars.put(&quot;declinedCheck&quot;, declinedCheck ? declinedCheck.join(&quot;,&quot;) : &quot;&quot;);

// ‚úÖ Ghi log Payload, Needs Review Check, Declined Check
//log.info(&quot; Payload: &quot; + payload);

// ‚úÖ X·ª≠ l√Ω `kycStatus` v·ªõi `switch-case`
switch (kycStatus) {
    case &quot;APPROVED&quot;:
        vars.put(&quot;isTriggerFinalCheck&quot;, &quot;true&quot;);
        log.info(&quot;‚úÖ KYC is APPROVED - Stopping current loop.&quot;);
        prev.setIgnore(); // D·ª´ng v√≤ng l·∫∑p hi·ªán t·∫°i
        return;

    case &quot;DECLINED&quot;:
        log.info(&quot;‚ùå KYC DECLINED! Declined Check Reasons: &quot; + declinedCheck);
        prev.setIgnore();
        return;

    case &quot;NEEDS_REVIEW&quot;:
        log.info(&quot; KYC NEEDS REVIEW: &quot; + needsReviewCheck);
        if (needsReviewCheck.isEmpty()) {
            vars.put(&quot;isTriggerFinalCheck&quot;, &quot;true&quot;);
            log.info(&quot; No further review required. Triggering final check.&quot;);
        }
        break;

    default:
//        log.warn(&quot;Ô∏è KYC Status: &quot; + kycStatus + &quot; - Continuing review process.&quot;); 
//        log.info(&quot;Ô∏è&quot;);
		log.info(&quot; Payload: &quot; + payload);
		// ‚úÖ T·∫°m d·ª´ng tr∆∞·ªõc khi ki·ªÉm tra l·∫°i
		Thread.sleep(3456);
}

//// ‚úÖ TƒÉng s·ªë l·∫ßn th·ª≠ ki·ªÉm tra KYC
//def attempts = Integer.parseInt(vars.get(&quot;attempts&quot;) ?: &quot;0&quot;) + 1;
//vars.put(&quot;attempts&quot;, String.valueOf(attempts));

//log.info(&quot; KYC Check Attempt: &quot; + attempts);

</stringProp>
              </JSR223PostProcessor>
              <hashTree/>
            </hashTree>
            <IfController guiclass="IfControllerPanel" testclass="IfController" testname="If needs review" enabled="true">
              <stringProp name="IfController.condition">${__groovy(vars.get(&quot;kycStatus&quot;).equals(&quot;NEEDS_REVIEW&quot;))}</stringProp>
              <boolProp name="IfController.evaluateAll">false</boolProp>
              <boolProp name="IfController.useExpression">true</boolProp>
            </IfController>
            <hashTree>
              <IfController guiclass="IfControllerPanel" testclass="IfController" testname="If is not trigger final check" enabled="true">
                <stringProp name="IfController.condition">${__groovy(vars.get(&quot;isTriggerFinalCheck&quot;) == null)}</stringProp>
                <boolProp name="IfController.evaluateAll">false</boolProp>
                <boolProp name="IfController.useExpression">true</boolProp>
              </IfController>
              <hashTree>
                <JSR223PreProcessor guiclass="TestBeanGUI" testclass="JSR223PreProcessor" testname="Build manual request" enabled="true">
                  <stringProp name="scriptLanguage">groovy</stringProp>
                  <stringProp name="parameters"></stringProp>
                  <stringProp name="filename"></stringProp>
                  <stringProp name="cacheKey">true</stringProp>
                  <stringProp name="script">import org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy
import org.apache.jmeter.threads.JMeterVariables
import groovy.json.JsonBuilder
import groovy.json.JsonOutput

// ‚úÖ Hi·ªÉn th·ªã th√¥ng tin c·∫≠p nh·∫≠t manual review
log.info(&quot; \n 2.10.2 ---------- UPDATING MANUAL REVIEW ----------&quot;);

// ‚úÖ L·∫•y gi√° tr·ªã `needsReviewCheck`
def needReviewStr = vars.get(&quot;needsReviewCheck&quot;)?.trim() ?: &quot;&quot;
if (needReviewStr.isEmpty()) {
    log.warn(&quot;‚ö†Ô∏è No checks found for manual review.&quot;);
    return;
}

// ‚úÖ Chia `needsReviewCheck` th√†nh danh s√°ch
def needsReviewChecks = needReviewStr.split(&apos;,&apos;);

// ‚úÖ Ghi log danh s√°ch c√°c review c·∫ßn ki·ªÉm tra
log.info(&quot; Needs Review Checks: &quot; + needsReviewChecks.join(&quot;, &quot;));

// ‚úÖ X√¢y d·ª±ng JSON cho manual update API
def manualUpdateBody = [:];
needsReviewChecks.each { check -&gt;
    manualUpdateBody[check] = &quot;MANUALLY_APPROVED&quot;;
}

// ‚úÖ Chuy·ªÉn ƒë·ªïi th√†nh JSON ƒë·∫πp ƒë·ªÉ log
def manualUpdateJson = new JsonBuilder(manualUpdateBody).toPrettyString();
vars.put(&quot;manualUpdateJson&quot;, manualUpdateJson);

// ‚úÖ Ghi log n·ªôi dung JSON manual update theo format r√µ r√†ng
log.info(&quot; Manual Update JSON:\n&quot; + JsonOutput.prettyPrint(JsonOutput.toJson(manualUpdateBody)));</stringProp>
                </JSR223PreProcessor>
                <hashTree/>
                <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.10.2 Manual Update" enabled="true">
                  <intProp name="HTTPSampler.concurrentPool">6</intProp>
                  <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
                  <stringProp name="HTTPSampler.path">/v3/onboarding/admin/kyc/${onboardingId}/manual-update</stringProp>
                  <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
                  <stringProp name="HTTPSampler.method">PATCH</stringProp>
                  <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
                  <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
                  <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
                    <collectionProp name="Arguments.arguments">
                      <elementProp name="" elementType="HTTPArgument">
                        <boolProp name="HTTPArgument.always_encode">false</boolProp>
                        <stringProp name="Argument.value">${manualUpdateJson}</stringProp>
                        <stringProp name="Argument.metadata">=</stringProp>
                      </elementProp>
                    </collectionProp>
                  </elementProp>
                </HTTPSamplerProxy>
                <hashTree>
                  <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
                    <collectionProp name="HeaderManager.headers">
                      <elementProp name="x-request-id" elementType="Header">
                        <stringProp name="Header.name">x-request-id</stringProp>
                        <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                      </elementProp>
                      <elementProp name="gtw-authorization" elementType="Header">
                        <stringProp name="Header.name">gtw-authorization</stringProp>
                        <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                      </elementProp>
                      <elementProp name="x-open-id" elementType="Header">
                        <stringProp name="Header.name">x-open-id</stringProp>
                        <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                      </elementProp>
                      <elementProp name="Accept-Language" elementType="Header">
                        <stringProp name="Header.name">Accept-Language</stringProp>
                        <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                      </elementProp>
                      <elementProp name="Content-Type" elementType="Header">
                        <stringProp name="Header.name">Content-Type</stringProp>
                        <stringProp name="Header.value">application/json</stringProp>
                      </elementProp>
                      <elementProp name="Accept-Encoding" elementType="Header">
                        <stringProp name="Header.name">Accept-Encoding</stringProp>
                        <stringProp name="Header.value">gzip, deflate, br</stringProp>
                      </elementProp>
                      <elementProp name="User-Agent" elementType="Header">
                        <stringProp name="Header.name">User-Agent</stringProp>
                        <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                      </elementProp>
                      <elementProp name="Accept" elementType="Header">
                        <stringProp name="Header.name">Accept</stringProp>
                        <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                      </elementProp>
                      <elementProp name="" elementType="Header">
                        <stringProp name="Header.name">x-session-id</stringProp>
                        <stringProp name="Header.value">${sessionId}</stringProp>
                      </elementProp>
                      <elementProp name="" elementType="Header">
                        <stringProp name="Header.name">OBD-Authorization</stringProp>
                        <stringProp name="Header.value">Bearer ${accessToken}</stringProp>
                      </elementProp>
                      <elementProp name="" elementType="Header">
                        <stringProp name="Header.name">X-KEY</stringProp>
                        <stringProp name="Header.value">${adminKey}</stringProp>
                      </elementProp>
                      <elementProp name="" elementType="Header">
                        <stringProp name="Header.name">username</stringProp>
                        <stringProp name="Header.value">JMETER</stringProp>
                      </elementProp>
                    </collectionProp>
                  </HeaderManager>
                  <hashTree/>
                  <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
                    <stringProp name="cacheKey">true</stringProp>
                    <stringProp name="filename"></stringProp>
                    <stringProp name="parameters"></stringProp>
                    <stringProp name="script">import groovy.json.JsonSlurper;

//log.info(&quot; \n ---------- MANUAL UPDATE ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ N·∫øu th√†nh c√¥ng, log k·∫øt qu·∫£
log.info(&quot;‚úÖ Manual Update th√†nh c√¥ng!&quot;);</stringProp>
                    <stringProp name="scriptLanguage">groovy</stringProp>
                  </JSR223PostProcessor>
                  <hashTree/>
                </hashTree>
              </hashTree>
              <IfController guiclass="IfControllerPanel" testclass="IfController" testname="If is trigger final check" enabled="true">
                <stringProp name="IfController.condition">${__groovy(vars.get(&quot;isTriggerFinalCheck&quot;) != null &amp;&amp; vars.get(&quot;isTriggerFinalCheck&quot;).equals(&quot;true&quot;))}</stringProp>
                <boolProp name="IfController.evaluateAll">false</boolProp>
                <boolProp name="IfController.useExpression">true</boolProp>
              </IfController>
              <hashTree>
                <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.10.3 Manual Final update" enabled="true">
                  <intProp name="HTTPSampler.concurrentPool">6</intProp>
                  <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
                  <stringProp name="HTTPSampler.path">/v3/onboarding/admin/kyc/${onboardingId}/final-check</stringProp>
                  <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
                  <stringProp name="HTTPSampler.method">PUT</stringProp>
                  <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
                  <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
                  <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
                    <collectionProp name="Arguments.arguments">
                      <elementProp name="" elementType="HTTPArgument">
                        <boolProp name="HTTPArgument.always_encode">false</boolProp>
                        <stringProp name="Argument.value">{&#xd;
	&quot;finalCheck&quot;: &quot;MANUALLY_APPROVED&quot;&#xd;
}&#xd;
</stringProp>
                        <stringProp name="Argument.metadata">=</stringProp>
                      </elementProp>
                    </collectionProp>
                  </elementProp>
                </HTTPSamplerProxy>
                <hashTree>
                  <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
                    <collectionProp name="HeaderManager.headers">
                      <elementProp name="x-request-id" elementType="Header">
                        <stringProp name="Header.name">x-request-id</stringProp>
                        <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                      </elementProp>
                      <elementProp name="gtw-authorization" elementType="Header">
                        <stringProp name="Header.name">gtw-authorization</stringProp>
                        <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                      </elementProp>
                      <elementProp name="x-open-id" elementType="Header">
                        <stringProp name="Header.name">x-open-id</stringProp>
                        <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                      </elementProp>
                      <elementProp name="Accept-Language" elementType="Header">
                        <stringProp name="Header.name">Accept-Language</stringProp>
                        <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                      </elementProp>
                      <elementProp name="Content-Type" elementType="Header">
                        <stringProp name="Header.name">Content-Type</stringProp>
                        <stringProp name="Header.value">application/json</stringProp>
                      </elementProp>
                      <elementProp name="Accept-Encoding" elementType="Header">
                        <stringProp name="Header.name">Accept-Encoding</stringProp>
                        <stringProp name="Header.value">gzip, deflate, br</stringProp>
                      </elementProp>
                      <elementProp name="User-Agent" elementType="Header">
                        <stringProp name="Header.name">User-Agent</stringProp>
                        <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                      </elementProp>
                      <elementProp name="Accept" elementType="Header">
                        <stringProp name="Header.name">Accept</stringProp>
                        <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                      </elementProp>
                      <elementProp name="" elementType="Header">
                        <stringProp name="Header.name">x-session-id</stringProp>
                        <stringProp name="Header.value">${sessionId}</stringProp>
                      </elementProp>
                      <elementProp name="" elementType="Header">
                        <stringProp name="Header.name">X-KEY</stringProp>
                        <stringProp name="Header.value">${adminKey}</stringProp>
                      </elementProp>
                      <elementProp name="" elementType="Header">
                        <stringProp name="Header.name">username</stringProp>
                        <stringProp name="Header.value">JMETER</stringProp>
                      </elementProp>
                    </collectionProp>
                  </HeaderManager>
                  <hashTree/>
                  <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
                    <stringProp name="cacheKey">true</stringProp>
                    <stringProp name="filename"></stringProp>
                    <stringProp name="parameters"></stringProp>
                    <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.10.3 ---------- MANUAL FINAL UPDATE ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info( requestUrl + &quot; | &quot; + responseTime);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ N·∫øu API th√†nh c√¥ng, ch·ªâ log k·∫øt qu·∫£ m√† kh√¥ng c·∫ßn hi·ªÉn th·ªã response ƒë·∫ßy ƒë·ªß
log.info(&quot;‚úÖ Manual Final Update th√†nh c√¥ng!&quot;);</stringProp>
                    <stringProp name="scriptLanguage">groovy</stringProp>
                  </JSR223PostProcessor>
                  <hashTree/>
                </hashTree>
              </hashTree>
            </hashTree>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.11 Update Status bypass OTP" enabled="true">
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/api/config-service/v1/config/update</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;configType&quot;: &quot;AUTHENTICATION_CONFIG&quot;,&#xd;
    &quot;key&quot;: &quot;is_account_whitelist_enabled&quot;,&#xd;
    &quot;value&quot;: &quot;true&quot;,&#xd;
    &quot;dataType&quot;: &quot;BOOLEAN&quot;,&#xd;
    &quot;scope&quot;: &quot;internal&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name"></stringProp>
                  <stringProp name="Header.value"></stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.11 ---------- UPDATE STATUS BYPASS OTP ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ N·∫øu API th√†nh c√¥ng, ch·ªâ log k·∫øt qu·∫£ m√† kh√¥ng c·∫ßn hi·ªÉn th·ªã response ƒë·∫ßy ƒë·ªß
log.info(&quot;‚úÖ Update Status bypass OTP th√†nh c√¥ng!&quot;);</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.12 Create bypass OTP" enabled="true">
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/api/config-service/v1/config/create</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;configType&quot;: &quot;AUTHENTICATION_CONFIG_ACCOUNT_WHITELIST&quot;,&#xd;
    &quot;key&quot;: &quot;${cifNumber}&quot;,&#xd;
    &quot;value&quot;: &quot;{\&quot;cif\&quot;:\&quot;${cifNumber}\&quot;,\&quot;otp\&quot;:\&quot;123456\&quot;,\&quot;isBypassFaceCheck\&quot;:true}&quot;,&#xd;
    &quot;dataType&quot;: &quot;JSON&quot;,&#xd;
    &quot;scope&quot;: &quot;internal&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name"></stringProp>
                  <stringProp name="Header.value"></stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${publicKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.12 ---------- CREATE BYPASS OTP ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ N·∫øu API th√†nh c√¥ng, ch·ªâ log k·∫øt qu·∫£ m√† kh√¥ng c·∫ßn hi·ªÉn th·ªã response ƒë·∫ßy ƒë·ªß
log.info(&quot;‚úÖ Create Bypass OTP th√†nh c√¥ng!&quot;);</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <WhileController guiclass="WhileControllerGui" testclass="WhileController" testname="2.13 Check account creation status" enabled="true">
            <stringProp name="WhileController.condition">${__groovy(
    def attempts = (vars.get(&quot;attemptsCreateAccount&quot;) ?: &quot;0&quot;) as Integer;
    def status = vars.get(&quot;accountCreationStatusOnboarded&quot;) ?: &quot;UNKNOWN&quot;;

    if (attempts &gt;= 20) return false; // Gi·ªõi h·∫°n t·ªëi ƒëa 20 l·∫ßn retry
    if (status == &quot;SUCCESS&quot;) return false; // D·ª´ng n·∫øu th√†nh c√¥ng
    if (status == &quot;FAILED&quot;) return true; // Ti·∫øp t·ª•c ƒë·ªÉ th·ª±c hi·ªán re-run create account

    return true; // N·∫øu &quot;INPROGRESS&quot;, ti·∫øp t·ª•c v√≤ng l·∫∑p
)}
</stringProp>
          </WhileController>
          <hashTree>
            <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.13.1 Get Account Creation Status" enabled="true">
              <intProp name="HTTPSampler.concurrentPool">6</intProp>
              <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
              <stringProp name="HTTPSampler.path">/v2/onboarding/accountCreation/${onboardingId}/status</stringProp>
              <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
              <stringProp name="HTTPSampler.method">GET</stringProp>
              <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
              <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
              <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
                <collectionProp name="Arguments.arguments">
                  <elementProp name="" elementType="HTTPArgument">
                    <boolProp name="HTTPArgument.always_encode">false</boolProp>
                    <stringProp name="Argument.value">{   &#xd;
    &quot;onboardId&quot;:&quot;${onboardingId}&quot;&#xd;
}</stringProp>
                    <stringProp name="Argument.metadata">=</stringProp>
                  </elementProp>
                </collectionProp>
              </elementProp>
            </HTTPSamplerProxy>
            <hashTree>
              <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
                <collectionProp name="HeaderManager.headers">
                  <elementProp name="x-request-id" elementType="Header">
                    <stringProp name="Header.name">x-request-id</stringProp>
                    <stringProp name="Header.value">bdb97a68-7821-4c9a-8f91-a01c23459d6c</stringProp>
                  </elementProp>
                  <elementProp name="gtw-authorization" elementType="Header">
                    <stringProp name="Header.name">gtw-authorization</stringProp>
                    <stringProp name="Header.value">Bearer ${access_token}</stringProp>
                  </elementProp>
                  <elementProp name="x-open-id" elementType="Header">
                    <stringProp name="Header.name">x-open-id</stringProp>
                    <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                  </elementProp>
                  <elementProp name="Accept-Language" elementType="Header">
                    <stringProp name="Header.name">Accept-Language</stringProp>
                    <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                  </elementProp>
                  <elementProp name="Content-Type" elementType="Header">
                    <stringProp name="Header.name">Content-Type</stringProp>
                    <stringProp name="Header.value">application/json</stringProp>
                  </elementProp>
                  <elementProp name="Accept-Encoding" elementType="Header">
                    <stringProp name="Header.name">Accept-Encoding</stringProp>
                    <stringProp name="Header.value">gzip, deflate, br</stringProp>
                  </elementProp>
                  <elementProp name="User-Agent" elementType="Header">
                    <stringProp name="Header.name">User-Agent</stringProp>
                    <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                  </elementProp>
                  <elementProp name="Accept" elementType="Header">
                    <stringProp name="Header.name">Accept</stringProp>
                    <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                  </elementProp>
                  <elementProp name="" elementType="Header">
                    <stringProp name="Header.name">X-KEY</stringProp>
                    <stringProp name="Header.value">${publicKey}</stringProp>
                  </elementProp>
                </collectionProp>
              </HeaderManager>
              <hashTree/>
              <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
                <stringProp name="scriptLanguage">groovy</stringProp>
                <stringProp name="parameters"></stringProp>
                <stringProp name="filename"></stringProp>
                <stringProp name="cacheKey">true</stringProp>
                <stringProp name="script">import groovy.json.JsonSlurper;


// ‚úÖ TƒÉng s·ªë l·∫ßn th·ª≠ ki·ªÉm tra Creation Account
def attemptsCreateAccount = Integer.parseInt(vars.get(&quot;attemptsCreateAccount&quot;) ?: &quot;0&quot;) + 1;
vars.put(&quot;attemptsCreateAccount&quot;, String.valueOf(attemptsCreateAccount));

log.info(&quot; \n 2.13.1 ---------- ACCOUNT CREATION STATUS &quot;+attemptsCreateAccount+&quot; ----------&quot;);


//log.info(&quot;üîÑ Account Creation Attempt: &quot; + attemptsCreateAccount);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode()?.toString();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); 
def requestUrl = prev.getURL().toString();
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n ƒë·ªÉ debug
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);

// ‚úÖ N·∫øu response kh√¥ng th√†nh c√¥ng, log l·ªói &amp; tƒÉng retry count
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Tr√≠ch xu·∫•t tr·∫°ng th√°i t·∫°o t√†i kho·∫£n
def accountCreationStatusOnboarded = jsonResponse?.payload?.status?.trim() ?: &quot;UNKNOWN&quot;;
vars.put(&quot;accountCreationStatusOnboarded&quot;, accountCreationStatusOnboarded);
log.info(&quot;‚úÖ Account creation status: &quot; + accountCreationStatusOnboarded);

// ‚úÖ N·∫øu status l√† &quot;FAILED&quot;, l∆∞u bi·∫øn trigger cho If Controller
if (accountCreationStatusOnboarded == &quot;FAILED&quot;) {
    vars.put(&quot;triggerReRunCreateAccount&quot;, &apos;true&apos;);
    log.error(&quot;‚ùå Account creation FAILED.&quot;);
//    log.error(&quot;‚ùå Will trigger re-run after 2 minutes.&quot;);
    log.error(&quot;‚ùå Will trigger re-run after 2s.&quot;);
    Thread.sleep(2000);
}

// ‚úÖ N·∫øu status l√† &quot;IN_PROGRESS&quot;, ch·ªù tr∆∞·ªõc l·∫ßn th·ª≠ ti·∫øp theo
if (accountCreationStatusOnboarded == &quot;IN_PROGRESS&quot;) {
    Thread.sleep(1000);
}
</stringProp>
              </JSR223PostProcessor>
              <hashTree/>
            </hashTree>
            <IfController guiclass="IfControllerPanel" testclass="IfController" testname="2.13.2 Check Account FAILED" enabled="true">
              <stringProp name="IfController.condition">${__groovy(vars.get(&apos;triggerReRunCreateAccount&apos;) == &apos;true&apos;)}</stringProp>
              <boolProp name="IfController.evaluateAll">false</boolProp>
              <boolProp name="IfController.useExpression">true</boolProp>
            </IfController>
            <hashTree>
              <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.13.2 Re-running create account" enabled="true">
                <stringProp name="HTTPSampler.path">/v4/onboarding/accountCreation/internal/account</stringProp>
                <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
                <stringProp name="HTTPSampler.method">POST</stringProp>
                <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
                <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
                <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
                  <collectionProp name="Arguments.arguments">
                    <elementProp name="" elementType="HTTPArgument">
                      <boolProp name="HTTPArgument.always_encode">false</boolProp>
                      <stringProp name="Argument.value">{ &quot;onboardId&quot;: &quot;${onboardingId}&quot; }</stringProp>
                      <stringProp name="Argument.metadata">=</stringProp>
                    </elementProp>
                  </collectionProp>
                </elementProp>
              </HTTPSamplerProxy>
              <hashTree>
                <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
                  <stringProp name="scriptLanguage">groovy</stringProp>
                  <stringProp name="parameters"></stringProp>
                  <stringProp name="filename"></stringProp>
                  <stringProp name="cacheKey">true</stringProp>
                  <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.13.2 ---------- RE-RUN CREATE ACCOUNT ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ N·∫øu th√†nh c√¥ng, log k·∫øt qu·∫£
log.info(&quot;‚úÖ Re-running create account th√†nh c√¥ng!&quot;);

// ‚úÖ Reset bi·∫øn `triggerReRunCreateAccount` ƒë·ªÉ tr√°nh ch·∫°y l·∫°i kh√¥ng c·∫ßn thi·∫øt
vars.put(&quot;triggerReRunCreateAccount&quot;, &quot;false&quot;);</stringProp>
                </JSR223PostProcessor>
                <hashTree/>
                <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
                  <collectionProp name="HeaderManager.headers">
                    <elementProp name="Accept" elementType="Header">
                      <stringProp name="Header.name">Content-Type</stringProp>
                      <stringProp name="Header.value">application/json</stringProp>
                    </elementProp>
                    <elementProp name="" elementType="Header">
                      <stringProp name="Header.name">X-KEY</stringProp>
                      <stringProp name="Header.value">${publicKey}</stringProp>
                    </elementProp>
                  </collectionProp>
                </HeaderManager>
                <hashTree/>
              </hashTree>
            </hashTree>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.14 Get Account Details - Prospect" enabled="true">
            <intProp name="HTTPSampler.concurrentPool">6</intProp>
            <stringProp name="HTTPSampler.contentEncoding">UTF-8</stringProp>
            <stringProp name="HTTPSampler.path">/v3/onboarding/admin/prospect/${onboardingId}</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">GET</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">false</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel" testclass="Arguments" testname="User Defined Variables">
              <collectionProp name="Arguments.arguments"/>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">dcb51815-7759-41d8-8fd6-46b32e241acf</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value"></stringProp>
                </elementProp>
                <elementProp name="baggage" elementType="Header">
                  <stringProp name="Header.name">baggage</stringProp>
                  <stringProp name="Header.value">sentry-environment=uat,sentry-transaction=StartupScreen,sentry-public_key=a8650128baf78c0abc77876f8736238f,sentry-trace_id=ae79a0eed0354e439ab2d6820a04d617,sentry-sample_rate=0.85</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="sentry-trace" elementType="Header">
                  <stringProp name="Header.name">sentry-trace</stringProp>
                  <stringProp name="Header.value">ae79a0eed0354e439ab2d6820a04d617-ae34fb51315f7476-1</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${adminKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.15 ---------- GET ACCOUNT DETAILS ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse;
try {
    jsonResponse = new JsonSlurper().parseText(response);
} catch (Exception e) {
    log.error(&quot;‚ùå L·ªói parse JSON: &quot; + e.getMessage());
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

try {
    log.info(&quot;\nProspect ID: &quot; + vars.get(&quot;onboardingId&quot;));

    // ‚úÖ Tr√≠ch xu·∫•t d·ªØ li·ªáu Prospect t·ª´ payload m·ªôt c√°ch an to√†n
    def payload = jsonResponse?.payload ?: [:];

    def fullnameProspect = payload?.customerDetails?.fullName ?: &quot;N/A&quot;;
    vars.put(&quot;fullnameProspect&quot;, fullnameProspect);
    log.info(&quot;Full Name: &quot; + fullnameProspect);

    def phoneNumberProspect = payload?.phoneNumber ?: &quot;N/A&quot;;
    vars.put(&quot;phoneNumberProspect&quot;, phoneNumberProspect);
    log.info(&quot;Phone Number: &quot; + phoneNumberProspect);

    def idNumberProspect = payload?.customerDetails?.idNumber ?: &quot;N/A&quot;;
    vars.put(&quot;idNumberProspect&quot;, idNumberProspect);
    log.info(&quot;ID Number: &quot; + idNumberProspect);

    def cifNumberProspect = payload?.accountCreation?.cifNumber ?: &quot;N/A&quot;;
    vars.put(&quot;cifNumberProspect&quot;, cifNumberProspect);
    log.info(&quot;CIF Number: &quot; + cifNumberProspect);

    def vikkiAccountNumberProspect = payload?.accountCreation?.vikkiAccountNumber ?: &quot;N/A&quot;;
    vars.put(&quot;vikkiAccountNumberProspect&quot;, vikkiAccountNumberProspect);
    log.info(&quot;Vikki Account Number: &quot; + vikkiAccountNumberProspect);

    def hdbCifNumberProspect = payload?.hdb?.hdbCifNumber ?: &quot;N/A&quot;;
    vars.put(&quot;hdbCifNumberProspect&quot;, hdbCifNumberProspect);
    log.info(&quot;HDBank CIF Number: &quot; + hdbCifNumberProspect);

    def caseIDProspect = payload?.caseId ?: &quot;N/A&quot;;
    vars.put(&quot;caseIDProspect&quot;, caseIDProspect);
    log.info(&quot;Case ID: &quot; + caseIDProspect);

    log.info(&quot;\n‚úÖ L·∫•y th√¥ng tin Prospect th√†nh c√¥ng! \n&quot;);

} catch (Exception e1) {
    log.error(&quot;‚ùå NOT FOUND YOUR INFO: &quot; + e1.getMessage());
}</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="[MOCK] Hyperverge OCR - Delete" enabled="false">
            <stringProp name="HTTPSampler.domain">wiremock.sit.galaxyfinx.in</stringProp>
            <stringProp name="HTTPSampler.path">__admin/mappings/${idHyperVergeOCRNew}</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">DELETE</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">false</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel" testclass="Arguments" testname="User Defined Variables">
              <collectionProp name="Arguments.arguments"/>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper

log.info(&quot;\n ----- DELETE [MOCK] HYPERVERGE OCR -----&quot;)

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def response = prev.getResponseDataAsString()?.trim()  // ƒê·∫£m b·∫£o response kh√¥ng null
def responseCode = prev.getResponseCode()?.toString()  // L·∫•y m√£ tr·∫°ng th√°i response
def responseMessage = prev.getResponseMessage()  // L·∫•y th√¥ng ƒëi·ªáp response
def responseTime = prev.getTime()  // L·∫•y th·ªùi gian ph·∫£n h·ªìi

// ‚úÖ Log th√¥ng tin c∆° b·∫£n c·ªßa request
log.info(&quot;Request URL: ${prev.getURL()} | ${responseTime}ms&quot;)

// ‚úÖ Ki·ªÉm tra n·∫øu response code kh√°c 201 (DELETE th√†nh c√¥ng tr·∫£ v·ªÅ 201)
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API Error! Response Code: ${responseCode} | Message: ${responseMessage}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return
}

// ‚úÖ Parse JSON an to√†n
def jsonResponse
try {
    jsonResponse = new JsonSlurper().parseText(response)  // Parse response JSON
} catch (Exception e) {
    log.error(&quot;‚ùå JSON Parsing Error: ${e.message}&quot;)
    log.error(&quot;Full Response: \n${response}&quot;)
    return
}

// ‚úÖ Log k·∫øt qu·∫£ th√†nh c√¥ng
def idHyperVergeOCRNew = vars.get(&quot;idHyperVergeOCRNew&quot;) ?: &quot;N/A&quot;  // L·∫•y ID mock OCR t·ª´ bi·∫øn JMeter (n·∫øu c√≥)
log.info(&quot;‚úÖ Delete Mock HyperVerge successful: ${idHyperVergeOCRNew}&quot;)
</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="2.15 Up vKYC" enabled="false">
            <stringProp name="HTTPSampler.path">/v2/onboarding/admin/kyc/video</stringProp>
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments">
              <collectionProp name="Arguments.arguments">
                <elementProp name="" elementType="HTTPArgument">
                  <boolProp name="HTTPArgument.always_encode">false</boolProp>
                  <stringProp name="Argument.value">{&#xd;
    &quot;cifNumber&quot;: &quot;${cifNumber}&quot;,&#xd;
    &quot;videoCaseId&quot;: &quot;&quot;,&#xd;
    &quot;status&quot;: &quot;PASS&quot;,&#xd;
    &quot;caseType&quot;: &quot;LIMIT_VKYC&quot;&#xd;
}</stringProp>
                  <stringProp name="Argument.metadata">=</stringProp>
                </elementProp>
              </collectionProp>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="x-request-id" elementType="Header">
                  <stringProp name="Header.name">x-request-id</stringProp>
                  <stringProp name="Header.value">dcb51815-7759-41d8-8fd6-46b32e241acf</stringProp>
                </elementProp>
                <elementProp name="gtw-authorization" elementType="Header">
                  <stringProp name="Header.name">gtw-authorization</stringProp>
                  <stringProp name="Header.value"></stringProp>
                </elementProp>
                <elementProp name="baggage" elementType="Header">
                  <stringProp name="Header.name">baggage</stringProp>
                  <stringProp name="Header.value">sentry-environment=uat,sentry-transaction=StartupScreen,sentry-public_key=a8650128baf78c0abc77876f8736238f,sentry-trace_id=ae79a0eed0354e439ab2d6820a04d617,sentry-sample_rate=0.85</stringProp>
                </elementProp>
                <elementProp name="Accept-Language" elementType="Header">
                  <stringProp name="Header.name">Accept-Language</stringProp>
                  <stringProp name="Header.value">en-GB,en-US;q=0.9,en;q=0.8</stringProp>
                </elementProp>
                <elementProp name="sentry-trace" elementType="Header">
                  <stringProp name="Header.name">sentry-trace</stringProp>
                  <stringProp name="Header.value">ae79a0eed0354e439ab2d6820a04d617-ae34fb51315f7476-1</stringProp>
                </elementProp>
                <elementProp name="Accept" elementType="Header">
                  <stringProp name="Header.name">Accept</stringProp>
                  <stringProp name="Header.value">application/json, text/plain, */*</stringProp>
                </elementProp>
                <elementProp name="x-open-id" elementType="Header">
                  <stringProp name="Header.name">x-open-id</stringProp>
                  <stringProp name="Header.value">7b0e270b-c4f4-4cc4-826c-f324bd2d6684</stringProp>
                </elementProp>
                <elementProp name="Content-Type" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="Accept-Encoding" elementType="Header">
                  <stringProp name="Header.name">Accept-Encoding</stringProp>
                  <stringProp name="Header.value">gzip, deflate, br</stringProp>
                </elementProp>
                <elementProp name="User-Agent" elementType="Header">
                  <stringProp name="Header.name">User-Agent</stringProp>
                  <stringProp name="Header.value">Vikki%20Uat/1698985660 CFNetwork/1410.0.3 Darwin/22.6.0</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">${adminKey}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
            <JSR223PostProcessor guiclass="TestBeanGUI" testclass="JSR223PostProcessor" testname="JSR223 PostProcessor" enabled="true">
              <stringProp name="scriptLanguage">groovy</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import groovy.json.JsonSlurper;

log.info(&quot; \n 2.14 ---------- UP vKYC ----------&quot;);

// ‚úÖ L·∫•y th√¥ng tin t·ª´ request tr∆∞·ªõc ƒë√≥
def responseCode = prev.getResponseCode();
def responseMessage = prev.getResponseMessage();
def responseTime = prev.getTime(); // Response time in milliseconds
def requestUrl = prev.getURL().toString(); // L·∫•y URL c·ªßa request
def response = prev.getResponseDataAsString().trim();

// ‚úÖ Log th√¥ng tin c∆° b·∫£n v·ªÅ request ƒë·ªÉ h·ªó tr·ª£ trace issue
log.info(requestUrl + &quot; | &quot; + responseTime + &quot;ms&quot;);


// ‚úÖ N·∫øu response code != 200, log l·ªói &amp; to√†n b·ªô response ƒë·ªÉ debug
if (responseCode != &quot;200&quot;) {
    log.error(&quot;‚ùå API L·ªói! Response Code: &quot; + responseCode + &quot; | Message: &quot; + responseMessage);
    log.error(&quot; Full Response: \n&quot; + response);
    return;
}

// ‚úÖ N·∫øu API th√†nh c√¥ng, ch·ªâ log k·∫øt qu·∫£ m√† kh√¥ng c·∫ßn hi·ªÉn th·ªã response ƒë·∫ßy ƒë·ªß
log.info(&quot;‚úÖ Up vKYC th√†nh c√¥ng!&quot;);</stringProp>
            </JSR223PostProcessor>
            <hashTree/>
          </hashTree>
          <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="Incoming transaction from HDB" enabled="false">
            <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
            <stringProp name="HTTPSampler.method">POST</stringProp>
            <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
            <boolProp name="HTTPSampler.postBodyRaw">false</boolProp>
            <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel" testclass="Arguments" testname="User Defined Variables">
              <collectionProp name="Arguments.arguments"/>
            </elementProp>
          </HTTPSamplerProxy>
          <hashTree>
            <JSR223PreProcessor guiclass="TestBeanGUI" testclass="JSR223PreProcessor" testname="JSR223 PreProcessor" enabled="false">
              <stringProp name="scriptLanguage">beanshell</stringProp>
              <stringProp name="parameters"></stringProp>
              <stringProp name="filename"></stringProp>
              <stringProp name="cacheKey">true</stringProp>
              <stringProp name="script">import javax.crypto.Mac
import javax.crypto.spec.SecretKeySpec
import org.apache.commons.codec.binary.Base64
import groovy.json.JsonOutput

// üîπ T·∫°o timestamp
def current = new Date()
def timestamp = current.format(&quot;yyyy-MM-dd&apos;T&apos;HH:mm:ss.SSS&apos;Z&apos;&quot;)
log.info(&quot;timestamp: &quot; + timestamp)
vars.put(&quot;timestamp&quot;, timestamp)

// üîπ T·∫°o refNo (random s·ªë 12 ch·ªØ s·ªë)
def refNo = (Math.abs(new Random().nextLong()) % 900000000000) + 100000000000
log.info(&quot;refNo: &quot; + refNo)
vars.put(&quot;refNo&quot;, refNo.toString())

// üîπ Set gi√° tr·ªã t√†i kho·∫£n
def vikkiAccountNumberProspect = &quot;880679145&quot;  // Thay b·∫±ng bi·∫øn m√¥i tr∆∞·ªùng n·∫øu c·∫ßn

// üîπ Chu·∫©n b·ªã body JSON (format chu·∫©n)
def body = JsonOutput.toJson([
    amount: 490000000,
    refNo: vars.get(&quot;refNo&quot;),
    currency: &quot;VND&quot;,
    transmissionDatevars.get(&quot;timestamp&quot;),
    fromAccount: &quot;0421000487800&quot;,
    fromAccountName: &quot;ADECCO HR Vietnam&quot;,
    toAccount: vikkiAccountNumberProspect,
    contentTransfers: &quot;FinX Bonus&quot;,
    timestamp: vars.get(&quot;timestamp&quot;)
])

log.info(&quot;Request Body: &quot; + body)
vars.put(&quot;requestBody&quot;, body)

// üîπ Chu·∫©n b·ªã raw string ƒë·ªÉ k√Ω (gi·ªØ nguy√™n format nh∆∞ Postman)
def raw = vars.get(&quot;timestamp&quot;) + &quot;POST&quot; + &quot;/api/payment-integration/v1/hdb/transaction&quot; + body
log.info(&quot;Raw String to Sign: &quot; + raw)
vars.put(&quot;rawString&quot;, raw)

// üîπ K√Ω HMAC-SHA256 + Encode Base64
def secret = &quot;th6r+5hgK+X+Tt9J&quot;  // Thay b·∫±ng gi√° tr·ªã th·∫≠t n·∫øu c·∫ßn
Mac sha256_HMAC = Mac.getInstance(&quot;HmacSHA256&quot;)
SecretKeySpec secret_key = new SecretKeySpec(secret.getBytes(&quot;UTF-8&quot;), &quot;HmacSHA256&quot;)
sha256_HMAC.init(secret_key)

byte[] hash = sha256_HMAC.doFinal(raw.getBytes(&quot;UTF-8&quot;))
String signature = Base64.encodeBase64String(hash)

log.info(&quot;Generated X-Payload-Signature: &quot; + signature)
vars.put(&quot;signature&quot;, signature)
</stringProp>
            </JSR223PreProcessor>
            <hashTree/>
            <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="false">
              <collectionProp name="HeaderManager.headers">
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name"></stringProp>
                  <stringProp name="Header.value"></stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">Content-Type</stringProp>
                  <stringProp name="Header.value">application/json</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-KEY</stringProp>
                  <stringProp name="Header.value">GfS39omUfRHReT3G02sSYTIpF</stringProp>
                </elementProp>
                <elementProp name="" elementType="Header">
                  <stringProp name="Header.name">X-Payload-Signature</stringProp>
                  <stringProp name="Header.value">${signature}</stringProp>
                </elementProp>
              </collectionProp>
            </HeaderManager>
            <hashTree/>
          </hashTree>
        </hashTree>
      </hashTree>
      <ResultCollector guiclass="ViewResultsFullVisualizer" testclass="ResultCollector" testname="View Results Tree" enabled="true">
        <boolProp name="ResultCollector.error_logging">false</boolProp>
        <objProp>
          <name>saveConfig</name>
          <value class="SampleSaveConfiguration">
            <time>true</time>
            <latency>true</latency>
            <timestamp>true</timestamp>
            <success>true</success>
            <label>true</label>
            <code>true</code>
            <message>true</message>
            <threadName>true</threadName>
            <dataType>true</dataType>
            <encoding>false</encoding>
            <assertions>true</assertions>
            <subresults>true</subresults>
            <responseData>false</responseData>
            <samplerData>false</samplerData>
            <xml>false</xml>
            <fieldNames>true</fieldNames>
            <responseHeaders>false</responseHeaders>
            <requestHeaders>false</requestHeaders>
            <responseDataOnError>false</responseDataOnError>
            <saveAssertionResultsFailureMessage>true</saveAssertionResultsFailureMessage>
            <assertionsResultsToSave>0</assertionsResultsToSave>
            <bytes>true</bytes>
            <sentBytes>true</sentBytes>
            <url>true</url>
            <threadCounts>true</threadCounts>
            <idleTime>true</idleTime>
            <connectTime>true</connectTime>
          </value>
        </objProp>
        <stringProp name="filename"></stringProp>
      </ResultCollector>
      <hashTree/>
      <ResultCollector guiclass="TableVisualizer" testclass="ResultCollector" testname="View Results in Table" enabled="true">
        <boolProp name="ResultCollector.error_logging">false</boolProp>
        <objProp>
          <name>saveConfig</name>
          <value class="SampleSaveConfiguration">
            <time>true</time>
            <latency>true</latency>
            <timestamp>true</timestamp>
            <success>true</success>
            <label>true</label>
            <code>true</code>
            <message>true</message>
            <threadName>true</threadName>
            <dataType>true</dataType>
            <encoding>false</encoding>
            <assertions>true</assertions>
            <subresults>true</subresults>
            <responseData>false</responseData>
            <samplerData>false</samplerData>
            <xml>false</xml>
            <fieldNames>true</fieldNames>
            <responseHeaders>false</responseHeaders>
            <requestHeaders>false</requestHeaders>
            <responseDataOnError>false</responseDataOnError>
            <saveAssertionResultsFailureMessage>true</saveAssertionResultsFailureMessage>
            <assertionsResultsToSave>0</assertionsResultsToSave>
            <bytes>true</bytes>
            <sentBytes>true</sentBytes>
            <url>true</url>
            <threadCounts>true</threadCounts>
            <idleTime>true</idleTime>
            <connectTime>true</connectTime>
          </value>
        </objProp>
        <stringProp name="filename"></stringProp>
      </ResultCollector>
      <hashTree/>
    </hashTree>
  </hashTree>
</jmeterTestPlan>
